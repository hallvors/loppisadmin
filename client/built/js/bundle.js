var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function s(e){return e()}function a(){return Object.create(null)}function r(e){e.forEach(s)}function l(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t,n){e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function c(e,t,n){if(e){const s=u(e,t,n);return e[0](s)}}function u(e,t,s){return e[1]?n({},n(t.$$scope.ctx,e[1](s?s(t):{}))):t.$$scope.ctx}function d(e,t,s,a){return e[1]?n({},n(t.$$scope.changed||{},e[1](a?a(s):{}))):t.$$scope.changed||{}}function h(e){return null==e?"":e}const p="undefined"!=typeof window;let m=p?()=>window.performance.now():()=>Date.now(),f=p?e=>requestAnimationFrame(e):e;const g=new Set;let v,b=!1;function _(){g.forEach(e=>{e[0](m())||(g.delete(e),e[1]())}),(b=g.size>0)&&f(_)}function $(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode.removeChild(e)}function S(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function A(){return w(" ")}function E(){return w("")}function j(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function D(e){return function(t){return t.preventDefault(),e.call(this,t)}}function N(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function T(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function C(e,t){t=""+t,e.data!==t&&(e.data=t)}function O(e,t,n){e.style.setProperty(t,n)}function R(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function M(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];s.selected=~t.indexOf(s.__value)}}function I(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function J(e){return[].map.call(e.querySelectorAll(":checked"),e=>e.__value)}function B(e,t,n){e.classList[n?"add":"remove"](t)}function U(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let H,P=0,F={};function q(e,t,n,s,a,r,l,i=0){const o=16.666/s;let c="{\n";for(let e=0;e<=1;e+=o){const s=t+(n-t)*r(e);c+=100*e+`%{${l(s,1-s)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${i}`;if(!F[d]){if(!v){const e=y("style");document.head.appendChild(e),v=e.sheet}F[d]=!0,v.insertRule(`@keyframes ${d} ${u}`,v.cssRules.length)}const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${s}ms linear ${a}ms 1 both`,P+=1,d}function G(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--P&&f(()=>{if(P)return;let e=v.cssRules.length;for(;e--;)v.deleteRule(e);F={}})}function Y(e){H=e}function z(){if(!H)throw new Error("Function called outside component initialization");return H}function L(e){z().$$.on_mount.push(e)}function K(){const e=H;return(t,n)=>{const s=e.$$.callbacks[t];if(s){const a=U(t,n);s.slice().forEach(t=>{t.call(e,a)})}}}const V=[],Q=[],X=[],Z=[],W=Promise.resolve();let ee,te=!1;function ne(e){X.push(e)}function se(){const e=new Set;do{for(;V.length;){const e=V.shift();Y(e),ae(e.$$)}for(;Q.length;)Q.pop()();for(let t=0;t<X.length;t+=1){const n=X[t];e.has(n)||(n(),e.add(n))}X.length=0}while(V.length);for(;Z.length;)Z.pop()();te=!1}function ae(e){e.fragment&&(e.update(e.dirty),r(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(ne))}function re(e,t,n){e.dispatchEvent(U(`${t?"intro":"outro"}${n}`))}const le=new Set;let ie;function oe(){ie={r:0,c:[],p:ie}}function ce(){ie.r||r(ie.c),ie=ie.p}function ue(e,t){e&&e.i&&(le.delete(e),e.i(t))}function de(e,t,n,s){if(e&&e.o){if(le.has(e))return;le.add(e),ie.c.push(()=>{le.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}}const he={duration:0};function pe(n,s,a,i){let o=s(n,a),c=i?0:1,u=null,d=null,h=null;function p(){h&&G(n,h)}function v(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function $(s){const{delay:a=0,duration:l=300,easing:i=t,tick:$=e,css:k}=o||he,x={start:m()+a,b:s};s||(x.group=ie,ie.r+=1),u?d=x:(k&&(p(),h=q(n,c,s,l,a,i,k)),s&&$(0,1),u=v(x,l),ne(()=>re(n,s,"start")),function(e){let t;b||(b=!0,f(_)),new Promise(n=>{g.add(t=[e,n])})}(e=>{if(d&&e>d.start&&(u=v(d,l),d=null,re(n,u.b,"start"),k&&(p(),h=q(n,c,u.b,u.duration,0,i,o.css))),u)if(e>=u.end)$(c=u.b,1-c),re(n,u.b,"end"),d||(u.b?p():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*i(t/u.duration),$(c,1-c)}return!(!u&&!d)}))}return{run(e){l(o)?(ee||(ee=Promise.resolve()).then(()=>{ee=null}),ee).then(()=>{o=o(),$(e)}):$(e)},end(){p(),u=d=null}}}function me(e,t){const s=t.token={};function a(e,a,r,l){if(t.token!==s)return;t.resolved=r&&{[r]:l};const i=n(n({},t.ctx),t.resolved),o=e&&(t.current=e)(i);t.block&&(t.blocks?t.blocks.forEach((e,n)=>{n!==a&&e&&(oe(),de(e,1,1,()=>{t.blocks[n]=null}),ce())}):t.block.d(1),o.c(),ue(o,1),o.m(t.mount(),t.anchor),se()),t.block=o,t.blocks&&(t.blocks[a]=o)}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){if(e.then(e=>{a(t.then,1,t.value,e)},e=>{a(t.catch,2,t.error,e)}),t.current!==t.pending)return a(t.pending,0),!0}else{if(t.current!==t.then)return a(t.then,1,t.value,e),!0;t.resolved={[t.value]:e}}var r}const fe="undefined"!=typeof window?window:global;function ge(e,t,n){const{fragment:a,on_mount:i,on_destroy:o,after_update:c}=e.$$;a.m(t,n),ne(()=>{const t=i.map(s).filter(l);o?o.push(...t):r(t),e.$$.on_mount=[]}),c.forEach(ne)}function ve(e,t){e.$$.fragment&&(r(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function be(e,t){e.$$.dirty||(V.push(e),te||(te=!0,W.then(se)),e.$$.dirty=a()),e.$$.dirty[t]=!0}function _e(t,n,s,l,i,o){const c=H;Y(t);const u=n.props||{},d=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:i,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:a(),dirty:null};let h=!1;var p;d.ctx=s?s(t,u,(e,n)=>{d.ctx&&i(d.ctx[e],d.ctx[e]=n)&&(d.bound[e]&&d.bound[e](n),h&&be(t,e))}):u,d.update(),h=!0,r(d.before_update),d.fragment=l(d.ctx),n.target&&(n.hydrate?d.fragment.l((p=n.target,Array.from(p.childNodes))):d.fragment.c(),n.intro&&ue(t.$$.fragment),ge(t,n.target,n.anchor),se()),Y(c)}class $e{$destroy(){ve(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ke(e){const t=e-1;return t*t*t+1}function xe(e,{delay:t=0,duration:n=400}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,css:e=>`opacity: ${e*s}`}}function Se(e,{delay:t=0,duration:n=400,easing:s=ke,x:a=0,y:r=0,opacity:l=0}){const i=getComputedStyle(e),o=+i.opacity,c="none"===i.transform?"":i.transform,u=o*(1-l);return{delay:t,duration:n,easing:s,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*a}px, ${(1-e)*r}px);\n\t\t\topacity: ${o-u*t}`}}const ye=location.protocol+"//"+location.host,we=ye+"/api",Ae="https://www.google.com/maps/dir//",Ee=["","Ny","Kontaktet","Mangler info","Klar til henting","Hentes","Hentet","Hentes ikke"];function je(e,t,n){const s=Object.create(e);return s.day=t[n],s}function De(e){var t,n,s=e.day+"";return{c(){t=y("li"),n=w(s),T(t,"class","svelte-urasfe"),B(t,"active",e.state[e.day])},m(e,s){k(e,t,s),$(t,n)},p(e,a){e.state&&s!==(s=a.day+"")&&C(n,s),e.state&&B(t,"active",a.state[a.day])},d(e){e&&x(t)}}}function Ne(t){for(var n,s=Object.keys(t.state),a=[],r=0;r<s.length;r+=1)a[r]=De(je(t,s,r));return{c(){n=y("ol");for(var e=0;e<a.length;e+=1)a[e].c();T(n,"class","svelte-urasfe")},m(e,t){k(e,n,t);for(var s=0;s<a.length;s+=1)a[s].m(n,null)},p(e,t){if(e.state){s=Object.keys(t.state);for(var r=0;r<s.length;r+=1){const l=je(t,s,r);a[r]?a[r].p(e,l):(a[r]=De(l),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},i:e,o:e,d(e){e&&x(n),S(a,e)}}}function Te(e,t,n){let{days:s}=t,a={Ti:!1,On:!1,To:!1};return s.split(/, ?/g).forEach(e=>{a[e.substr(0,2)]=!0,n("state",a)}),e.$set=(e=>{"days"in e&&n("days",s=e.days)}),{days:s,state:a}}class Ce extends $e{constructor(e){super(),_e(this,e,Te,Ne,i,["days"])}}function Oe(e,t,n){const s=Object.create(e);return s.typ=t[n],s}function Re(e){var t,n,s=e.typ+"";return{c(){t=y("br"),n=w(s)},m(e,s){k(e,t,s),k(e,n,s)},p(e,t){e.types&&s!==(s=t.typ+"")&&C(n,s)},d(e){e&&(x(t),x(n))}}}function Me(e){var t,n,s,a;return{c(){T(t=y("img"),"src",n=e.icons[e.typ]),T(t,"alt",s=e.typ),T(t,"title",a=e.typ),T(t,"height","24")},m(e,n){k(e,t,n)},p(e,r){e.types&&n!==(n=r.icons[r.typ])&&T(t,"src",n),e.types&&s!==(s=r.typ)&&T(t,"alt",s),e.types&&a!==(a=r.typ)&&T(t,"title",a)},d(e){e&&x(t)}}}function Ie(e){var t;function n(e){return e.icons[e.typ]?Me:e.showAll?Re:void 0}var s=n(e),a=s&&s(e);return{c(){a&&a.c(),t=E()},m(e,n){a&&a.m(e,n),k(e,t,n)},p(e,r){s===(s=n(r))&&a?a.p(e,r):(a&&a.d(1),(a=s&&s(r))&&(a.c(),a.m(t.parentNode,t)))},d(e){a&&a.d(e),e&&x(t)}}}function Je(t){for(var n,s=t.types,a=[],r=0;r<s.length;r+=1)a[r]=Ie(Oe(t,s,r));return{c(){for(var e=0;e<a.length;e+=1)a[e].c();n=E()},m(e,t){for(var s=0;s<a.length;s+=1)a[s].m(e,t);k(e,n,t)},p(e,t){if(e.icons||e.types||e.showAll){s=t.types;for(var r=0;r<s.length;r+=1){const l=Oe(t,s,r);a[r]?a[r].p(e,l):(a[r]=Ie(l),a[r].c(),a[r].m(n.parentNode,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},i:e,o:e,d(e){S(a,e),e&&x(n)}}}function Be(e,t,n){let{types:s=[],showAll:a=!1}=t;var r;return r=(()=>{"string"==typeof s&&n("types",s=s.split(/,\s+/g))}),z().$$.before_update.push(r),n("types",s=s.split(/,\s+/g)),e.$set=(e=>{"types"in e&&n("types",s=e.types),"showAll"in e&&n("showAll",a=e.showAll)}),{types:s,showAll:a,icons:{"Møbler":"/images/mobler.png","Bøker":"/images/boker.png",Musikk:"/images/musikk.png","Klær":"/images/klaer.png",Film:"/images/film.png",Sykler:"/images/sykkel.png",Elektrisk:"/images/elektrisk.png",Sportsutstyr:"/images/sport.png","Kjøkkenutstyr":"/images/kjokken.png",Leker:"/images/leker.png"}}}class Ue extends $e{constructor(e){super(),_e(this,e,Be,Je,i,["types","showAll"])}}const He=()=>({}),Pe=()=>({});function Fe(e){var t,n,s,a,r,l,i,o,h,p;const m=e.$$slots.header,f=c(m,e,Pe),g=e.$$slots.default,v=c(g,e,null);return{c(){t=y("div"),n=A(),s=y("div"),f&&f.c(),a=A(),r=y("hr"),l=A(),v&&v.c(),i=A(),o=y("hr"),T(t,"class","modal-background svelte-txoeo"),T(s,"class","modal svelte-txoeo"),p=j(t,"click",N(e.click_handler))},l(e){f&&f.l(div1_nodes),v&&v.l(div1_nodes)},m(c,u){k(c,t,u),k(c,n,u),k(c,s,u),f&&f.m(s,null),$(s,a),$(s,r),$(s,l),v&&v.m(s,null),$(s,i),$(s,o),e.div1_binding(s),h=!0},p(e,t){f&&f.p&&e.$$scope&&f.p(d(m,t,e,He),u(m,t,Pe)),v&&v.p&&e.$$scope&&v.p(d(g,t,e,null),u(g,t,null))},i(e){h||(ue(f,e),ue(v,e),h=!0)},o(e){de(f,e),de(v,e),h=!1},d(a){a&&(x(t),x(n),x(s)),f&&f.d(a),v&&v.d(a),e.div1_binding(null),p()}}}function qe(e,t,n){const s=K();let a,r;var l;L(()=>{a&&a.scrollIntoView&&a.scrollIntoView(),a&&a.querySelector&&(r=document.activeElement,a.querySelector("input, select, textarea, button").focus())}),l=(()=>{r&&r.focus&&r.focus()}),z().$$.on_destroy.push(l);let{$$slots:i={},$$scope:o}=t;return e.$set=(e=>{"$$scope"in e&&n("$$scope",o=e.$$scope)}),{dispatch:s,modalElm:a,click_handler:function(){return s("close")},div1_binding:function(e){Q[e?"unshift":"push"](()=>{n("modalElm",a=e)})},$$slots:i,$$scope:o}}class Ge extends $e{constructor(e){super(),_e(this,e,qe,Fe,i,[])}}function Ye(t){var n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b,_,S,w,E,N,C,O,R,I,J,B,U,H,P,F,q,G,Y,z,L,K,V,Q,X,Z,W,ee,te,se,ae;return{c(){n=y("form"),s=y("p"),(a=y("span")).textContent="Mobilnummer:",l=y("span"),i=y("input"),o=A(),c=y("p"),(u=y("span")).textContent="Adresse for henting:",d=y("span"),h=y("textarea"),p=A(),m=y("p"),(f=y("span")).textContent="Om loppene:",g=y("span"),v=y("textarea"),b=A(),_=y("p"),(S=y("span")).textContent="Hentetidspunkt:",w=y("span"),E=y("select"),(N=y("option")).textContent="Tirsdag kveld",(C=y("option")).textContent="Onsdag kveld",(O=y("option")).textContent="Torsdag kveld",R=A(),I=y("p"),(J=y("span")).textContent="Type bil:",B=A(),U=y("span"),H=y("label"),P=y("input"),F=A(),q=y("img"),G=A(),Y=y("label"),z=y("input"),L=A(),K=y("img"),V=A(),Q=y("p"),X=y("span"),Z=A(),W=y("span"),(ee=y("button")).textContent="Oppdater",te=A(),(se=y("button")).textContent="Avbryt",T(a,"class","svelte-1hgccn9"),T(i,"inputmode","tel"),T(i,"class","svelte-1hgccn9"),T(l,"class","svelte-1hgccn9"),T(s,"class","svelte-1hgccn9"),T(u,"class","svelte-1hgccn9"),T(h,"class","svelte-1hgccn9"),T(d,"class","svelte-1hgccn9"),T(c,"class","svelte-1hgccn9"),T(f,"class","svelte-1hgccn9"),T(v,"class","svelte-1hgccn9"),T(g,"class","svelte-1hgccn9"),T(m,"class","svelte-1hgccn9"),T(S,"class","svelte-1hgccn9"),N.__value="Tirsdag kveld",N.value=N.__value,C.__value="Onsdag kveld",C.value=C.__value,O.__value="Torsdag kveld",O.value=O.__value,void 0===t.time&&ne(()=>t.select_change_handler.call(E)),E.multiple=!0,T(E,"class","svelte-1hgccn9"),T(w,"class","svelte-1hgccn9"),T(_,"class","svelte-1hgccn9"),T(J,"class","svelte-1hgccn9"),t.$$binding_groups[0].push(P),T(P,"type","radio"),T(P,"name","size"),P.__value=ze,P.value=P.__value,T(P,"class","svelte-1hgccn9"),T(q,"src","/images/bigcar.png"),T(q,"alt","stor bil"),T(q,"width","36"),T(q,"class","svelte-1hgccn9"),T(H,"class","svelte-1hgccn9"),t.$$binding_groups[0].push(z),T(z,"type","radio"),T(z,"name","size"),z.__value="",z.value=z.__value,T(z,"class","svelte-1hgccn9"),T(K,"src","/images/smallcar.png"),T(K,"alt","liten bil"),T(K,"width","36"),T(K,"class","svelte-1hgccn9"),T(Y,"class","svelte-1hgccn9"),T(U,"class","svelte-1hgccn9"),T(I,"class","svelte-1hgccn9"),T(X,"class","svelte-1hgccn9"),T(ee,"type","submit"),T(ee,"class","p8 br2 svelte-1hgccn9"),T(se,"type","button"),T(se,"class","p8 br2 svelte-1hgccn9"),T(W,"class","svelte-1hgccn9"),T(Q,"class","svelte-1hgccn9"),T(n,"class","svelte-1hgccn9"),ae=[j(i,"input",t.input0_input_handler),j(h,"input",t.textarea0_input_handler),j(v,"input",t.textarea1_input_handler),j(E,"change",t.select_change_handler),j(P,"change",t.input1_change_handler),j(z,"change",t.input2_change_handler),j(se,"click",t.click_handler),j(n,"submit",D(t.submit_handler))]},m(e,r){k(e,n,r),$(n,s),$(s,a),$(s,l),$(l,i),i.value=t.number,$(n,o),$(n,c),$(c,u),$(c,d),$(d,h),h.value=t.address,$(n,p),$(n,m),$(m,f),$(m,g),$(g,v),v.value=t.info,$(n,b),$(n,_),$(_,S),$(_,w),$(w,E),$(E,N),$(E,C),$(E,O),M(E,t.time),$(n,R),$(n,I),$(I,J),$(I,B),$(I,U),$(U,H),$(H,P),P.checked=P.__value===t.size,$(H,F),$(H,q),$(U,G),$(U,Y),$(Y,z),z.checked=z.__value===t.size,$(Y,L),$(Y,K),$(n,V),$(n,Q),$(Q,X),$(Q,Z),$(Q,W),$(W,ee),$(W,te),$(W,se)},p(e,t){e.number&&i.value!==t.number&&(i.value=t.number),e.address&&(h.value=t.address),e.info&&(v.value=t.info),e.time&&M(E,t.time),e.size&&(P.checked=P.__value===t.size),P.value=P.__value,e.size&&(z.checked=z.__value===t.size)},i:e,o:e,d(e){e&&x(n),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(P),1),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(z),1),r(ae)}}}const ze="Store ting (vare-bil eller tilhenger kreves ved henting)";function Le(e,t,n){let{job:s,head:a}=t;const r=K();let l=s[a.PHONE],i=s[a.DESC],o=s[a.PICKUP_DAYS].split(/,\s*/g),c=s[a.ADDRESS],u=s[a.SIZE];function d(){r("update",{[a.PHONE]:l,[a.ADDRESS]:c,[a.DESC]:i,[a.PICKUP_DAYS]:o.join(", "),[a.SIZE]:u})}return e.$set=(e=>{"job"in e&&n("job",s=e.job),"head"in e&&n("head",a=e.head)}),{job:s,head:a,dispatch:r,number:l,info:i,time:o,address:c,size:u,update:d,input0_input_handler:function(){l=this.value,n("number",l)},textarea0_input_handler:function(){c=this.value,n("address",c)},textarea1_input_handler:function(){i=this.value,n("info",i)},select_change_handler:function(){o=J(this),n("time",o)},input1_change_handler:function(){u=this.__value,n("size",u)},input2_change_handler:function(){u=this.__value,n("size",u)},click_handler:function(e){return r("cancel")},submit_handler:function(e){return d()},$$binding_groups:[[]]}}class Ke extends $e{constructor(e){super(),_e(this,e,Le,Ye,i,["job","head"])}}function Ve(t){var n,s,a,r,l,i,o,c,u,d,h,p,m,f,g,v,b,_,S,E,j;return{c(){n=w(t.name),s=A(),a=y("a"),r=w("🔎"),i=A(),o=y("br"),c=A(),u=w(t.number),d=A(),h=y("a"),p=w("☎"),f=A(),g=y("a"),v=w("✉"),_=A(),S=y("a"),E=w("🔎"),T(a,"href",l="https://www.gulesider.no/"+encodeURIComponent(t.name)+"/personer"),T(a,"target","_blank"),T(a,"title","Slå opp person på Gule sider"),T(a,"class","svelte-ablbnc"),T(h,"href",m="tel:"+t.number),T(h,"title","Ring nummer"),T(h,"class","svelte-ablbnc"),T(g,"href",b="sms:"+t.number),T(g,"title","Send SMS"),T(g,"class","svelte-ablbnc"),T(S,"href",j="https://www.gulesider.no/"+t.number+"/personer"),T(S,"target","_blank"),T(S,"title","slå opp nummer på Gule sider"),T(S,"class","svelte-ablbnc")},m(e,t){k(e,n,t),k(e,s,t),k(e,a,t),$(a,r),k(e,i,t),k(e,o,t),k(e,c,t),k(e,u,t),k(e,d,t),k(e,h,t),$(h,p),k(e,f,t),k(e,g,t),$(g,v),k(e,_,t),k(e,S,t),$(S,E)},p(e,t){e.name&&C(n,t.name),e.name&&l!==(l="https://www.gulesider.no/"+encodeURIComponent(t.name)+"/personer")&&T(a,"href",l),e.number&&C(u,t.number),e.number&&m!==(m="tel:"+t.number)&&T(h,"href",m),e.number&&b!==(b="sms:"+t.number)&&T(g,"href",b),e.number&&j!==(j="https://www.gulesider.no/"+t.number+"/personer")&&T(S,"href",j)},i:e,o:e,d(e){e&&(x(n),x(s),x(a),x(i),x(o),x(c),x(u),x(d),x(h),x(f),x(g),x(_),x(S))}}}function Qe(e,t,n){let{name:s,number:a}=t;return e.$set=(e=>{"name"in e&&n("name",s=e.name),"number"in e&&n("number",a=e.number)}),{name:s,number:a}}class Xe extends $e{constructor(e){super(),_e(this,e,Qe,Ve,i,["name","number"])}}function Ze(e,t,n){const s=Object.create(e);return s.star=t[n],s.index=n,s}function We(e){var t,n,s,a;return{c(){T(t=y("img"),"src",n=e.star),T(t,"alt",s="poeng: "+e.qualityRanking),T(t,"data-index",e.index),T(t,"class","svelte-ssp047"),a=j(t,"click",e.handleClick)},m(e,n){k(e,t,n)},p(e,a){e.stars&&n!==(n=a.star)&&T(t,"src",n),e.qualityRanking&&s!==(s="poeng: "+a.qualityRanking)&&T(t,"alt",s)},d(e){e&&x(t),a()}}}function et(t){for(var n,s=t.stars,a=[],r=0;r<s.length;r+=1)a[r]=We(Ze(t,s,r));return{c(){n=y("div");for(var e=0;e<a.length;e+=1)a[e].c()},m(e,t){k(e,n,t);for(var s=0;s<a.length;s+=1)a[s].m(n,null)},p(e,t){if(e.stars||e.qualityRanking){s=t.stars;for(var r=0;r<s.length;r+=1){const l=Ze(t,s,r);a[r]?a[r].p(e,l):(a[r]=We(l),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},i:e,o:e,d(e){e&&x(n),S(a,e)}}}let tt="/images/star-empty.png",nt="/images/star-full.png";function st(e,t,n){const s=K();let{qualityRanking:a}=t,r=[];if(""===a||void 0===a)n("stars",r=[tt,tt,tt]);else{for(let e=0;e<=a;e++)r.push(nt);for(let e=a;e<2;e++)r.push(tt)}return e.$set=(e=>{"qualityRanking"in e&&n("qualityRanking",a=e.qualityRanking)}),{qualityRanking:a,stars:r,handleClick:function(e){let t=parseInt(e.target.getAttribute("data-index"));n("qualityRanking",a=t+1),s("qualityupdate",{kvalitet:t});for(let e=0;e<=t;e++)r[e]=nt,n("stars",r);for(let e=t+1;e<r.length;e++)r[e]=tt,n("stars",r)}}}class at extends $e{constructor(e){super(),_e(this,e,st,et,i,["qualityRanking"])}}function rt(t){var n;return{c(){T(n=y("div"),"class","lds-dual-ring svelte-1sriuqy"),O(n,"width",t.w+"px"),O(n,"height",t.h+"px")},m(e,t){k(e,n,t)},p(e,t){e.w&&O(n,"width",t.w+"px"),e.h&&O(n,"height",t.h+"px")},i:e,o:e,d(e){e&&x(n)}}}function lt(e,t,n){let{w:s=32,h:a=32}=t;return e.$set=(e=>{"w"in e&&n("w",s=e.w),"h"in e&&n("h",a=e.h)}),{w:s,h:a}}class it extends $e{constructor(e){super(),_e(this,e,lt,rt,i,["w","h"])}}const ot=[];function ct(t,n=e){let s;const a=[];function r(e){if(i(t,e)&&(t=e,s)){const e=!ot.length;for(let e=0;e<a.length;e+=1){const n=a[e];n[1](),ot.push(n,t)}if(e){for(let e=0;e<ot.length;e+=2)ot[e][0](ot[e+1]);ot.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(l,i=e){const o=[l,i];return a.push(o),1===a.length&&(s=n(r)||e),l(t),()=>{const e=a.indexOf(o);-1!==e&&a.splice(e,1),0===a.length&&(s(),s=null)}}}}const ut=ct([]),dt=ct([]);if("undefined"!=typeof localStorage){let e=localStorage.getItem("drivers");e&&ut.set(JSON.parse(e));ut.subscribe(e=>{localStorage.setItem("drivers",JSON.stringify(e))})}const ht="4741238002";function pt(e,t,n,s){dt.update(n=>(n.find(n=>n[t.JOBNR]===e).loading=!0,n));let a=we+"/update/"+e;return s&&(a+="?token="+s),fetch(a,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({details:n})}).then(e=>e.json()).then(n=>(console.log(n),dt.update(n=>{return n.find(n=>n[t.JOBNR]===e).loading=!1,n}),n))}function mt(e){return e.replace(/\s*/g,"").substr(-8)}function ft(e,t,n,s,a,r,l,i){if(a&&["Hentet","Hentes ikke"].indexOf(l[i.STATUS])>-1)return!1;if(t.smallActive&&t.bigActive&&n.monActive&&n.tueActive&&n.wedActive&&n.thuActive&&!n.dayFilterExclusive&&!e&&!s)return!0;if(!t.bigActive&&l[i.SIZE])return!1;if(!t.smallActive&&!l[i.SIZE])return!1;if(s&&-1===l[i.TYPES].indexOf(s))return!1;let o=[{prop:n.tueActive,str:"Tirsdag"},{prop:n.wedActive,str:"Onsdag"},{prop:n.thuActive,str:"Torsdag"}].map(e=>n.dayFilterExclusive?l[i.PICKUP_DAYS].indexOf(e.str)>-1===e.prop:e.prop&&l[i.PICKUP_DAYS].indexOf(e.str)>-1);return!!(o=n.dayFilterExclusive?o.reduce((e,t)=>e&&t,!0):o.indexOf(!0)>-1)&&(!!(l[i.ASSIGNEE]&&r&&r.length&&e&&r.find(t=>t.name.toLowerCase().indexOf(e.toLowerCase())>-1))||[i.ADDRESS,i.TYPES,i.CONTACT_PERSON,i.PHONE,i.DESC,i.STATUS,i.ADMCOMMENT,i.ASSIGNEE].map(t=>(l[t]||"").toLowerCase().indexOf(e.toLowerCase())>-1).indexOf(!0)>-1)}function gt(e,t,n){const s=Object.create(e);return s.theState=t[n],s}function vt(e){var t,n,s=new it({props:{w:"24",h:"24"}});return{c(){t=y("div"),s.$$.fragment.c(),T(t,"class","svelte-thhux8")},m(e,a){k(e,t,a),ge(s,t,null),n=!0},i(e){n||(ue(s.$$.fragment,e),n=!0)},o(e){de(s.$$.fragment,e),n=!1},d(e){e&&x(t),ve(s)}}}function bt(e){var t;return{c(){T(t=y("img"),"src","/images/smallcar.png"),T(t,"alt","liten bil"),T(t,"height","22")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function _t(e){var t;return{c(){T(t=y("img"),"src","/images/bigcar.png"),T(t,"alt","stor bil"),T(t,"height","22")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function $t(e){var t,n,s=e.theState+"";return{c(){t=y("option"),n=w(s),t.__value=e.theState,t.value=t.__value},m(e,s){k(e,t,s),$(t,n)},p(e,n){t.value=t.__value},d(e){e&&x(t)}}}function kt(e){var t,n,s,a,r,l,i=e.getDriverName(e.itemData[e.head.ASSIGNEE])+"",o=Et(e.itemData[e.head.STATUS])+"";return{c(){t=y("div"),n=y("a"),s=w(i),r=A(),l=w(o),T(n,"href",a="tel:"+mt(e.itemData[e.head.ASSIGNEE])),T(t,"class","hentesav svelte-thhux8")},m(e,a){k(e,t,a),$(t,n),$(n,s),$(t,r),$(t,l)},p(e,t){e.itemData&&i!==(i=t.getDriverName(t.itemData[t.head.ASSIGNEE])+"")&&C(s,i),e.itemData&&a!==(a="tel:"+mt(t.itemData[t.head.ASSIGNEE]))&&T(n,"href",a),e.itemData&&o!==(o=Et(t.itemData[t.head.STATUS])+"")&&C(l,o)},d(e){e&&x(t)}}}function xt(e){var t,n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b,_,S,E,D,N,O,R=e.itemData[e.head.TYPES]+"",M=e.itemData[e.head.DESC]+"",I=new Xe({props:{name:e.itemData[e.head.ASSIGNEE],number:e.itemData[e.head.PHONE]}}),J=e.showEditor&&St(e);return{c(){t=y("tr"),n=y("td"),s=y("td"),I.$$.fragment.c(),a=A(),l=y("p"),i=w(R),o=A(),c=y("p"),u=y("i"),d=w(M),h=A(),p=y("p"),(m=y("button")).innerHTML='<img src="/images/edit.png" alt="endre detaljer" width="36" class="svelte-thhux8">',f=A(),J&&J.c(),g=A(),v=y("td"),b=w("Kommentarer fra admin/hentere:"),_=y("br"),S=A(),E=y("textarea"),T(n,"class","svelte-thhux8"),T(m,"class","svelte-thhux8"),T(p,"class","cen svelte-thhux8"),T(s,"colspan","3"),T(s,"class","extrainfo svelte-thhux8"),T(E,"class","svelte-thhux8"),T(v,"colspan","2"),T(v,"class","svelte-thhux8"),T(t,"data-id",D=e.itemData[e.head.JOBNR]),O=[j(m,"click",e.click_handler_3),j(E,"input",e.textarea_input_handler),j(E,"change",e.change_handler_2)]},m(r,x){k(r,t,x),$(t,n),$(t,s),ge(I,s,null),$(s,a),$(s,l),$(l,i),$(s,o),$(s,c),$(c,u),$(u,d),$(s,h),$(s,p),$(p,m),$(s,f),J&&J.m(s,null),$(t,g),$(t,v),$(v,b),$(v,_),$(v,S),$(v,E),E.value=e.itemData[e.head.ADMCOMMENT],N=!0},p(e,n){var a={};(e.itemData||e.head)&&(a.name=n.itemData[n.head.ASSIGNEE]),(e.itemData||e.head)&&(a.number=n.itemData[n.head.PHONE]),I.$set(a),N&&!e.itemData||R===(R=n.itemData[n.head.TYPES]+"")||C(i,R),N&&!e.itemData||M===(M=n.itemData[n.head.DESC]+"")||C(d,M),n.showEditor?J?(J.p(e,n),ue(J,1)):((J=St(n)).c(),ue(J,1),J.m(s,null)):J&&(oe(),de(J,1,1,()=>{J=null}),ce()),(e.itemData||e.head)&&(E.value=n.itemData[n.head.ADMCOMMENT]),N&&!e.itemData||D===(D=n.itemData[n.head.JOBNR])||T(t,"data-id",D)},i(e){N||(ue(I.$$.fragment,e),ue(J),N=!0)},o(e){de(I.$$.fragment,e),de(J),N=!1},d(e){e&&x(t),ve(I),J&&J.d(),r(O)}}}function St(e){var t,n=new Ge({props:{$$slots:{default:[wt],header:[yt]},$$scope:{ctx:e}}});return n.$on("close",e.close_handler),{c(){n.$$.fragment.c()},m(e,s){ge(n,e,s),t=!0},p(e,t){var s={};(e.$$scope||e.itemData)&&(s.$$scope={changed:e,ctx:t}),n.$set(s)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){de(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function yt(e){var t;return{c(){(t=y("h2")).textContent="Endre detaljer",T(t,"slot","header")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function wt(e){var t,n,s=new Ke({props:{job:e.itemData,head:e.head}});return s.$on("update",e.update),s.$on("cancel",e.cancel_handler),{c(){t=A(),s.$$.fragment.c()},m(e,a){k(e,t,a),ge(s,e,a),n=!0},p(e,t){var n={};e.itemData&&(n.job=t.itemData),e.head&&(n.head=t.head),s.$set(n)},i(e){n||(ue(s.$$.fragment,e),n=!0)},o(e){de(s.$$.fragment,e),n=!1},d(e){e&&x(t),ve(s,e)}}}function At(e){var t,n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b,_,D,O,M,I,J,U,H,P,F,q,G,Y,z,L,K,V,Q,X,Z,W,ee,te,se,ae,re=e.itemData[e.head.JOBNR]+"",le=e.itemData[e.head.ADDRESS]+"",ie=e.itemData[e.head.PICKUP_DAYS]+"",he=e.itemData.loading&&vt();function pe(e){return e.itemData[e.head.SIZE]?_t:bt}var me=pe(e),fe=me(e),be=new Ue({props:{types:e.itemData[e.head.TYPES]}}),_e=new at({props:{qualityRanking:e.itemData[e.head.QUALITY]}});_e.$on("qualityupdate",e.update);for(var $e=new Ce({props:{days:e.itemData[e.head.PICKUP_DAYS]}}),ke=Ee,xe=[],Se=0;Se<ke.length;Se+=1)xe[Se]=$t(gt(e,ke,Se));var ye=e.itemData[e.head.ASSIGNEE]&&kt(e),we=e.expanded&&xt(e);return{c(){t=y("tr"),n=y("td"),he&&he.c(),s=A(),a=y("span"),l=w(re),i=A(),o=w(le),c=A(),u=y("a"),d=w("🔎"),p=A(),m=y("br"),f=A(),g=y("div"),v=y("i"),b=w(ie),_=A(),D=y("td"),fe.c(),O=A(),M=y("td"),be.$$.fragment.c(),I=A(),J=y("td"),_e.$$.fragment.c(),U=A(),H=y("td"),$e.$$.fragment.c(),P=A(),F=y("td"),q=y("input"),Y=A(),z=y("label"),L=w("✓"),V=A(),Q=y("select");for(var r=0;r<xe.length;r+=1)xe[r].c();Z=A(),ye&&ye.c(),ee=A(),we&&we.c(),te=E(),T(a,"class","jobnr svelte-thhux8"),T(u,"href",h="https://www.google.no/maps/?q="+encodeURIComponent(e.itemData[e.head.ADDRESS])),T(u,"target","_blank"),T(g,"class","smallscreen svelte-thhux8"),T(n,"tabindex","0"),T(n,"class","svelte-thhux8"),B(n,"expanded",e.expanded),B(n,"loading",e.loading),T(D,"class","car svelte-thhux8"),T(M,"class","typefilter svelte-thhux8"),T(J,"class","svelte-thhux8"),T(H,"class","svelte-thhux8"),T(q,"type","checkbox"),T(q,"id",G="select"+e.itemData[e.head.JOBNR]),T(q,"class","svelte-thhux8"),T(z,"for",K="select"+e.itemData[e.head.JOBNR]),T(z,"tabindex","0"),T(z,"class","svelte-thhux8"),void 0===e.itemData[e.head.STATUS]&&ne(()=>e.select_change_handler.call(Q)),Q.disabled=X=Boolean(e.itemData[e.head.ASSIGNEE]),T(Q,"class","svelte-thhux8"),T(F,"class","statuscell svelte-thhux8"),T(t,"class","job svelte-thhux8"),T(t,"data-id",W=e.itemData[e.head.JOBNR]),B(t,"itemSelected",e.itemSelected),ae=[j(u,"click",N(e.click_handler)),j(n,"click",e.click_handler_1),j(q,"change",e.input_change_handler),j(q,"change",e.change_handler),j(Q,"change",e.select_change_handler),j(Q,"change",N(e.change_handler_1)),j(F,"click",e.click_handler_2)]},m(r,h){k(r,t,h),$(t,n),he&&he.m(n,null),$(n,s),$(n,a),$(a,l),$(n,i),$(n,o),$(n,c),$(n,u),$(u,d),$(n,p),$(n,m),$(n,f),$(n,g),$(g,v),$(v,b),$(t,_),$(t,D),fe.m(D,null),$(t,O),$(t,M),ge(be,M,null),$(t,I),$(t,J),ge(_e,J,null),$(t,U),$(t,H),ge($e,H,null),$(t,P),$(t,F),$(F,q),q.checked=e.itemSelected,$(F,Y),$(F,z),$(z,L),$(F,V),$(F,Q);for(var x=0;x<xe.length;x+=1)xe[x].m(Q,null);R(Q,e.itemData[e.head.STATUS]),$(F,Z),ye&&ye.m(F,null),k(r,ee,h),we&&we.m(r,h),k(r,te,h),se=!0},p(e,a){a.itemData.loading?he?ue(he,1):((he=vt()).c(),ue(he,1),he.m(n,s)):he&&(oe(),de(he,1,1,()=>{he=null}),ce()),se&&!e.itemData||re===(re=a.itemData[a.head.JOBNR]+"")||C(l,re),se&&!e.itemData||le===(le=a.itemData[a.head.ADDRESS]+"")||C(o,le),se&&!e.itemData||h===(h="https://www.google.no/maps/?q="+encodeURIComponent(a.itemData[a.head.ADDRESS]))||T(u,"href",h),se&&!e.itemData||ie===(ie=a.itemData[a.head.PICKUP_DAYS]+"")||C(b,ie),e.expanded&&B(n,"expanded",a.expanded),e.loading&&B(n,"loading",a.loading),me!==(me=pe(a))&&(fe.d(1),(fe=me(a))&&(fe.c(),fe.m(D,null)));var r={};(e.itemData||e.head)&&(r.types=a.itemData[a.head.TYPES]),be.$set(r);var i={};(e.itemData||e.head)&&(i.qualityRanking=a.itemData[a.head.QUALITY]),_e.$set(i);var c={};if((e.itemData||e.head)&&(c.days=a.itemData[a.head.PICKUP_DAYS]),$e.$set(c),e.itemSelected&&(q.checked=a.itemSelected),se&&!e.itemData||G===(G="select"+a.itemData[a.head.JOBNR])||T(q,"id",G),se&&!e.itemData||K===(K="select"+a.itemData[a.head.JOBNR])||T(z,"for",K),e.states){ke=Ee;for(var d=0;d<ke.length;d+=1){const t=gt(a,ke,d);xe[d]?xe[d].p(e,t):(xe[d]=$t(t),xe[d].c(),xe[d].m(Q,null))}for(;d<xe.length;d+=1)xe[d].d(1);xe.length=ke.length}(e.itemData||e.head)&&R(Q,a.itemData[a.head.STATUS]),se&&!e.itemData||X===(X=Boolean(a.itemData[a.head.ASSIGNEE]))||(Q.disabled=X),a.itemData[a.head.ASSIGNEE]?ye?ye.p(e,a):((ye=kt(a)).c(),ye.m(F,null)):ye&&(ye.d(1),ye=null),se&&!e.itemData||W===(W=a.itemData[a.head.JOBNR])||T(t,"data-id",W),e.itemSelected&&B(t,"itemSelected",a.itemSelected),a.expanded?we?(we.p(e,a),ue(we,1)):((we=xt(a)).c(),ue(we,1),we.m(te.parentNode,te)):we&&(oe(),de(we,1,1,()=>{we=null}),ce())},i(e){se||(ue(he),ue(be.$$.fragment,e),ue(_e.$$.fragment,e),ue($e.$$.fragment,e),ue(we),se=!0)},o(e){de(he),de(be.$$.fragment,e),de(_e.$$.fragment,e),de($e.$$.fragment,e),de(we),se=!1},d(e){e&&x(t),he&&he.d(),fe.d(),ve(be),ve(_e),ve($e),S(xe,e),ye&&ye.d(),e&&x(ee),we&&we.d(e),e&&x(te),r(ae)}}}function Et(e){return"Hentet"===e?"hentet":"henter nå"}function jt(e,t,n){let s;o(e,ut,e=>{n("$drivers",s=e)});const a=K();let r,{itemData:l,itemSelected:i=!1,prefs:c}=t,u=c.head,d=!1,h=!1;function p(e){return n("showEditor",h=!1),pt(l[u.JOBNR],u,e.detail).catch(e=>alert(e))}return e.$set=(e=>{"itemData"in e&&n("itemData",l=e.itemData),"itemSelected"in e&&n("itemSelected",i=e.itemSelected),"prefs"in e&&n("prefs",c=e.prefs)}),e.$$.update=((e={itemData:1})=>{e.itemData&&n("loading",r=l.loading)}),{dispatch:a,itemData:l,itemSelected:i,prefs:c,head:u,expanded:d,showEditor:h,update:p,getDriverName:function(e){let t=s.find(t=>t.number===mt(e));return t?t.name:mt(e)},loading:r,click_handler:function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}(e,t)},click_handler_1:function(e){const t=d=!d;return n("expanded",d),t},input_change_handler:function(){i=this.checked,n("itemSelected",i)},change_handler:function(e){return a("select",{jobnr:l[u.JOBNR],selected:e.target.checked})},select_change_handler:function(){l[u.STATUS]=I(this),n("itemData",l),n("head",u),n("states",Ee)},change_handler_1:function(e){return p({detail:{status:e.target.value}})},click_handler_2:function(e){-1===["SELECT","LABEL","INPUT","OPTION","A"].indexOf(e.target.tagName)&&a("select",{jobnr:l[u.JOBNR],selected:!i})},click_handler_3:function(e){const t=h=!0;return n("showEditor",h),t},cancel_handler:function(e){const t=h=!1;return n("showEditor",h),t},close_handler:function(){const e=h=!1;return n("showEditor",h),e},textarea_input_handler:function(){l[u.ADMCOMMENT]=this.value,n("itemData",l),n("head",u),n("states",Ee)},change_handler_2:function(e){return pt(l[u.JOBNR],u,{[u.ADMCOMMENT]:e.target.value})}}}class Dt extends $e{constructor(e){super(),_e(this,e,jt,At,i,["itemData","itemSelected","prefs"])}}function Nt(e,t,n){const s=Object.create(e);return s.name=t[n],s}function Tt(e,t,n){const s=Object.create(e);return s.recipient=t[n],s}function Ct(e){var t,n;return{c(){T(t=y("textarea"),"pattern","[0-9 ,]"),t.required=!0,T(t,"class","svelte-72ojky"),n=j(t,"input",e.textarea_input_handler)},m(n,s){k(n,t,s),t.value=e.recipients},p(e,n){e.recipients&&(t.value=n.recipients)},d(e){e&&x(t),n()}}}function Ot(e){for(var t,n,s=e.possibleRecipients,a=[],r=0;r<s.length;r+=1)a[r]=Mt(Tt(e,s,r));return{c(){t=y("select");for(var s=0;s<a.length;s+=1)a[s].c();void 0===e.recipients&&ne(()=>e.select_change_handler.call(t)),t.multiple=!0,t.required=!0,T(t,"class","svelte-72ojky"),n=j(t,"change",e.select_change_handler)},m(n,s){k(n,t,s);for(var r=0;r<a.length;r+=1)a[r].m(t,null);M(t,e.recipients)},p(e,n){if(e.possibleRecipients){s=n.possibleRecipients;for(var r=0;r<s.length;r+=1){const l=Tt(n,s,r);a[r]?a[r].p(e,l):(a[r]=Mt(l),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}e.recipients&&M(t,n.recipients)},d(e){e&&x(t),S(a,e),n()}}}function Rt(e){var t,n,s=e.recipient.address+"";return{c(){t=w("- "),n=w(s)},m(e,s){k(e,t,s),k(e,n,s)},p(e,t){e.possibleRecipients&&s!==(s=t.recipient.address+"")&&C(n,s)},d(e){e&&(x(t),x(n))}}}function Mt(e){var t,n,s,a,r=e.recipient.name+"",l=e.recipient.address&&Rt(e);return{c(){t=y("option"),n=w(r),l&&l.c(),s=A(),t.__value=a=e.recipient.number,t.value=t.__value,T(t,"class","svelte-72ojky")},m(e,a){k(e,t,a),$(t,n),l&&l.m(t,null),$(t,s)},p(e,i){e.possibleRecipients&&r!==(r=i.recipient.name+"")&&C(n,r),i.recipient.address?l?l.p(e,i):((l=Rt(i)).c(),l.m(t,s)):l&&(l.d(1),l=null),e.possibleRecipients&&a!==(a=i.recipient.number)&&(t.__value=a),t.value=t.__value},d(e){e&&x(t),l&&l.d()}}}function It(e){for(var t,n,s,a,r,l,i,o=Object.keys(e.stdMessages),c=[],u=0;u<o.length;u+=1)c[u]=Jt(Nt(e,o,u));return{c(){t=y("p"),(n=y("b")).textContent="Kjappe svar",s=A(),a=y("span"),r=y("select"),l=y("option");for(var o=0;o<c.length;o+=1)c[o].c();l.__value="",l.value=l.__value,T(l,"class","svelte-72ojky"),T(r,"class","svelte-72ojky"),T(a,"class","svelte-72ojky"),T(t,"class","svelte-72ojky"),i=j(r,"change",e.change_handler)},m(e,i){k(e,t,i),$(t,n),$(t,s),$(t,a),$(a,r),$(r,l);for(var o=0;o<c.length;o+=1)c[o].m(r,null)},p(e,t){if(e.stdMessages){o=Object.keys(t.stdMessages);for(var n=0;n<o.length;n+=1){const s=Nt(t,o,n);c[n]?c[n].p(e,s):(c[n]=Jt(s),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=o.length}},d(e){e&&x(t),S(c,e),i()}}}function Jt(e){var t,n,s=e.name+"";return{c(){t=y("option"),n=w(s),t.__value=e.name,t.value=t.__value,T(t,"class","svelte-72ojky")},m(e,s){k(e,t,s),$(t,n)},p(e,n){t.value=t.__value},d(e){e&&x(t)}}}function Bt(t){var n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b,_,S,w,E;function N(e){return e.possibleRecipients&&e.possibleRecipients.length?Ot:Ct}var C=N(t),O=C(t),R=t.showQuickReplies&&It(t);return{c(){n=y("form"),s=y("p"),(a=y("b")).textContent="Til",l=y("span"),O.c(),i=A(),o=y("p"),(c=y("b")).textContent="SMS",u=A(),d=y("span"),h=y("textarea"),p=A(),R&&R.c(),m=A(),f=y("p"),g=y("span"),v=A(),b=y("span"),(_=y("button")).textContent="Send",S=A(),(w=y("button")).textContent="Avbryt",T(l,"class","to svelte-72ojky"),T(s,"class","svelte-72ojky"),h.required=!0,T(h,"class","svelte-72ojky"),T(d,"class","sms svelte-72ojky"),T(o,"class","svelte-72ojky"),T(g,"class","svelte-72ojky"),T(_,"type","submit"),T(_,"class","p8 br2 svelte-72ojky"),T(w,"class","p8 br2 svelte-72ojky"),T(w,"type","button"),T(b,"class","svelte-72ojky"),T(f,"class","svelte-72ojky"),T(n,"class","svelte-72ojky"),E=[j(h,"input",t.textarea_input_handler_1),j(w,"click",t.click_handler),j(n,"submit",D(t.submit_handler))]},m(e,r){k(e,n,r),$(n,s),$(s,a),$(s,l),O.m(l,null),$(n,i),$(n,o),$(o,c),$(o,u),$(o,d),$(d,h),h.value=t.message,$(n,p),R&&R.m(n,null),$(n,m),$(n,f),$(f,g),$(f,v),$(f,b),$(b,_),$(b,S),$(b,w)},p(e,t){C===(C=N(t))&&O?O.p(e,t):(O.d(1),(O=C(t))&&(O.c(),O.m(l,null))),e.message&&(h.value=t.message),t.showQuickReplies?R?R.p(e,t):((R=It(t)).c(),R.m(n,m)):R&&(R.d(1),R=null)},i:e,o:e,d(e){e&&x(n),O.d(),R&&R.d(),r(E)}}}function Ut(e,t,n){let{recipients:s=[],message:a="",possibleRecipients:r}=t,l=!a;const i=K();let o={"Bekreft data mottatt":"Hei,\ntakk for at du har sendt inn skjema om loppehenting! :)\n\nVi henter hver kveld mellom 24. og 26. august. Vi kontakter deg på dette nummeret før henting.\n\nVennlig hilsen Ila og Bolteløkka skolekorps","Hentes snart":"Hei,\ntakk for at du vil gi korpset lopper. Passer det om noen kommer og henter hos deg snart?\n\nVennlig hilsen Ila og Bolteløkka skolekorps","Ikke IKEA":"Hei,\ntakk for at du vil gi korpset lopper! Dessverre har vi dårlig erfaring med å selge IKEA-møbler, så slike vil vi helst ikke ta imot.\n\nVennlig hilsen Ila og Bolteløkka skolekorps","Ikke sofa":"Hei,\ntakk for at du vil gi korpset lopper! Dessverre har vi dårlig erfaring med å selge sofaer på loppemarked. Vi vil helst ikke ta imot sofaer med mindre de er av spesielt god kvalitet.\n\nVennlig hilsen Ila og Bolteløkka skolekorps","Rekker ikke":"Hei,\ntakk for at du vil gi korpset lopper! Dessverre rekker vi ikke å hente loppene dine i kveld. Dersom du har mulighet til å levere i skolegården, er det supert.\n\nVennlig hilsen Ila og Bolteløkka skolekorps","For langt borte":"Hei,\ntakk for at du vil gi korpset lopper! Dessverre rekker vi ikke å hente tingene dine, fordi det er litt for langt borte fra vårt område. Vi foreslår at du  tar kontakt med et lokalt korps og spør om de skal hente lopper snart.\n\nVennlig hilsen Ila og Bolteløkka skolekorps","Send foto?":"Hei,\ntakk for at du vil gi korpset lopper! Kan du sende meg et foto av loppene?\n\nVennlig hilsen Ila og Bolteløkka skolekorps"};function c(){i("sms","string"==typeof s?{recipients:s.split(/,\s*/g),message:a}:{recipients:s,message:a})}function u(e){e&&o[e]&&n("message",a=o[e])}return e.$set=(e=>{"recipients"in e&&n("recipients",s=e.recipients),"message"in e&&n("message",a=e.message),"possibleRecipients"in e&&n("possibleRecipients",r=e.possibleRecipients)}),{recipients:s,message:a,possibleRecipients:r,showQuickReplies:l,dispatch:i,stdMessages:o,send:c,addMessage:u,select_change_handler:function(){s=J(this),n("recipients",s),n("possibleRecipients",r)},textarea_input_handler:function(){s=this.value,n("recipients",s),n("possibleRecipients",r)},textarea_input_handler_1:function(){a=this.value,n("message",a)},change_handler:function(e){return u(e.target.value)},click_handler:function(e){return i("cancel")},submit_handler:function(e){return c()}}}class Ht extends $e{constructor(e){super(),_e(this,e,Ut,Bt,i,["recipients","message","possibleRecipients"])}}function Pt(e,t,n){const s=Object.create(e);return s.name=t[n].name,s.number=t[n].number,s}function Ft(e){for(var t,n=e.$drivers,s=[],a=0;a<n.length;a+=1)s[a]=qt(Pt(e,n,a));return{c(){t=y("ul");for(var e=0;e<s.length;e+=1)s[e].c()},m(e,n){k(e,t,n);for(var a=0;a<s.length;a+=1)s[a].m(t,null)},p(e,a){if(e.$drivers){n=a.$drivers;for(var r=0;r<n.length;r+=1){const l=Pt(a,n,r);s[r]?s[r].p(e,l):(s[r]=qt(l),s[r].c(),s[r].m(t,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(e){e&&x(t),S(s,e)}}}function qt(e){var t,n,s,a,r,l,i,o,c,u,d=e.name+"",h=e.number+"";function p(...t){return e.click_handler(e,...t)}return{c(){t=y("li"),n=y("b"),s=w(d),a=w(", "),r=y("a"),l=w(h),o=A(),(c=y("button")).textContent="X",T(r,"href",i="tel:"+e.number),T(c,"class","cancel br2 svelte-4kixmb"),u=j(c,"click",p)},m(e,i){k(e,t,i),$(t,n),$(n,s),$(t,a),$(t,r),$(r,l),$(t,o),$(t,c)},p(t,n){e=n,t.$drivers&&d!==(d=e.name+"")&&C(s,d),t.$drivers&&h!==(h=e.number+"")&&C(l,h),t.$drivers&&i!==(i="tel:"+e.number)&&T(r,"href",i)},d(e){e&&x(t),u()}}}function Gt(t){var n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b,_,S,w,E,N=t.$drivers.length&&Ft(t);return{c(){n=y("div"),N&&N.c(),s=A(),a=y("form"),l=y("p"),(i=y("span")).textContent="Navn: ",o=y("span"),c=y("input"),u=A(),d=y("p"),(h=y("span")).textContent="Mobil: ",p=y("span"),m=y("input"),f=A(),g=y("p"),v=y("span"),b=y("span"),(_=y("button")).textContent="Legg til",S=A(),(w=y("button")).textContent="Lukk",T(i,"class","svelte-4kixmb"),c.required=!0,T(c,"class","svelte-4kixmb"),T(o,"class","svelte-4kixmb"),T(l,"class","svelte-4kixmb"),T(h,"class","svelte-4kixmb"),T(m,"inputmode","tel"),m.required=!0,T(m,"class","svelte-4kixmb"),T(p,"class","svelte-4kixmb"),T(d,"class","svelte-4kixmb"),T(v,"class","svelte-4kixmb"),T(_,"type","submit"),T(_,"class","p8 br2 svelte-4kixmb"),T(w,"class","p8 br2 svelte-4kixmb"),T(w,"type","button"),T(b,"class","svelte-4kixmb"),T(g,"class","svelte-4kixmb"),T(a,"class","svelte-4kixmb"),E=[j(c,"input",t.input0_input_handler),j(m,"input",t.input1_input_handler),j(w,"click",t.click_handler_1),j(a,"submit",D(t.submit_handler))]},m(e,r){k(e,n,r),N&&N.m(n,null),$(n,s),$(n,a),$(a,l),$(l,i),$(l,o),$(o,c),c.value=t.addName,$(a,u),$(a,d),$(d,h),$(d,p),$(p,m),m.value=t.addNumber,$(a,f),$(a,g),$(g,v),$(g,b),$(b,_),$(b,S),$(b,w)},p(e,t){t.$drivers.length?N?N.p(e,t):((N=Ft(t)).c(),N.m(n,s)):N&&(N.d(1),N=null),e.addName&&c.value!==t.addName&&(c.value=t.addName),e.addNumber&&m.value!==t.addNumber&&(m.value=t.addNumber)},i:e,o:e,d(e){e&&x(n),N&&N.d(),r(E)}}}function Yt(e,t,n){let s;o(e,ut,e=>{n("$drivers",s=e)});const a=K();let r="",l="";function i(e,t){ut.update(n=>(n.push({name:e,number:t}),n)),n("addNumber",l=r=""),n("addName",r)}return{dispatch:a,addName:r,addNumber:l,createDriver:i,$drivers:s,click_handler:function({name:e,number:t},n){return function(e,t){ut.update(n=>{let s=n.findIndex(n=>n.name===e&&n.number===t);return n.splice(s,1),n})}(e,t)},input0_input_handler:function(){r=this.value,n("addName",r)},input1_input_handler:function(){l=this.value,n("addNumber",l)},click_handler_1:function(e){return a("cancel")},submit_handler:function(e){return i(r,l)}}}class zt extends $e{constructor(e){super(),_e(this,e,Yt,Gt,i,[])}}function Lt(e,t,n){const s=Object.create(e);return s.theState=t[n],s}function Kt(e){var t,n,s=e.theState+"";return{c(){t=y("option"),n=w(s),t.__value=e.theState,t.value=t.__value,T(t,"class","svelte-1j620z1")},m(e,s){k(e,t,s),$(t,n)},p(e,n){t.value=t.__value},d(e){e&&x(t)}}}function Vt(t){for(var n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b=Ee,_=[],w=0;w<b.length;w+=1)_[w]=Kt(Lt(t,b,w));return{c(){n=y("form"),s=y("p"),(a=y("b")).textContent="Ny status:",l=A(),i=y("span"),o=y("select");for(var e=0;e<_.length;e+=1)_[e].c();c=A(),u=y("p"),d=y("span"),h=A(),p=y("span"),(m=y("button")).textContent="Oppdater valgte",f=A(),(g=y("button")).textContent="Avbryt",T(a,"class","svelte-1j620z1"),void 0===t.newState&&ne(()=>t.select_change_handler.call(o)),T(o,"class","svelte-1j620z1"),T(i,"class","svelte-1j620z1"),T(s,"class","svelte-1j620z1"),T(d,"class","svelte-1j620z1"),T(m,"type","submit"),T(m,"class","p8 br2 svelte-1j620z1"),T(g,"class","p8 br2 svelte-1j620z1"),T(g,"type","button"),T(p,"class","svelte-1j620z1"),T(u,"class","svelte-1j620z1"),T(n,"class","svelte-1j620z1"),v=[j(o,"change",t.select_change_handler),j(g,"click",t.click_handler),j(n,"submit",D(t.submit_handler))]},m(e,r){k(e,n,r),$(n,s),$(s,a),$(s,l),$(s,i),$(i,o);for(var v=0;v<_.length;v+=1)_[v].m(o,null);R(o,t.newState),$(n,c),$(n,u),$(u,d),$(u,h),$(u,p),$(p,m),$(p,f),$(p,g)},p(e,t){if(e.states){b=Ee;for(var n=0;n<b.length;n+=1){const s=Lt(t,b,n);_[n]?_[n].p(e,s):(_[n]=Kt(s),_[n].c(),_[n].m(o,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=b.length}e.newState&&R(o,t.newState)},i:e,o:e,d(e){e&&x(n),S(_,e),r(v)}}}function Qt(e,t,n){const s=K();let a="";function r(){s("statusupdate",{newState:a})}return{dispatch:s,newState:a,send:r,select_change_handler:function(){a=I(this),n("newState",a),n("states",Ee)},click_handler:function(e){return s("cancel")},submit_handler:function(e){return r()}}}class Xt extends $e{constructor(e){super(),_e(this,e,Qt,Vt,i,[])}}function Zt(e){var t,n,s,a;return{c(){t=y("div"),n=w(e.message),O(t,"bottom",36*e.index+"px"),T(t,"class","svelte-ni4itl"),B(t,"isError",e.isError)},m(e,s){k(e,t,s),$(t,n),a=!0},p(e,s){a&&!e.message||C(n,s.message),a&&!e.index||O(t,"bottom",36*s.index+"px"),e.isError&&B(t,"isError",s.isError)},i(e){a||(ne(()=>{s||(s=pe(t,Se,{y:50,duration:500},!0)),s.run(1)}),a=!0)},o(e){s||(s=pe(t,Se,{y:50,duration:500},!1)),s.run(0),a=!1},d(e){e&&(x(t),s&&s.end())}}}function Wt(e,t,n){let{message:s="",isError:a=!1,index:r=0}=t;return e.$set=(e=>{"message"in e&&n("message",s=e.message),"isError"in e&&n("isError",a=e.isError),"index"in e&&n("index",r=e.index)}),{message:s,isError:a,index:r}}class en extends $e{constructor(e){super(),_e(this,e,Wt,Zt,i,["message","isError","index"])}}function tn(e,t,n){const s=Object.create(e);return s.item=t[n],s}function nn(e){var t,n;return{c(){T(t=y("img"),"src",n=e.item.icon),T(t,"alt",""),T(t,"class","svelte-1s9tfhz")},m(e,n){k(e,t,n)},p(e,s){e.items&&n!==(n=s.item.icon)&&T(t,"src",n)},d(e){e&&x(t)}}}function sn(e){var t,n,s,a,r,l=e.item.label+"",i=e.item.icon&&nn(e);return{c(){t=y("button"),i&&i.c(),n=A(),s=w(l),a=A(),T(t,"class","menu svelte-1s9tfhz"),r=j(t,"click",e.item.action)},m(e,r){k(e,t,r),i&&i.m(t,null),$(t,n),$(t,s),$(t,a)},p(a,r){(e=r).item.icon?i?i.p(a,e):((i=nn(e)).c(),i.m(t,n)):i&&(i.d(1),i=null),a.items&&l!==(l=e.item.label+"")&&C(s,l)},d(e){e&&x(t),i&&i.d(),r()}}}function an(t){for(var n,s=t.items,a=[],r=0;r<s.length;r+=1)a[r]=sn(tn(t,s,r));return{c(){n=y("div");for(var e=0;e<a.length;e+=1)a[e].c();T(n,"class","menu svelte-1s9tfhz"),O(n,"top",t.y+"px"),O(n,"left",t.x+"px"),O(n,"position","fixed"),B(n,"show",t.show)},m(e,t){k(e,n,t);for(var s=0;s<a.length;s+=1)a[s].m(n,null)},p(e,t){if(e.items){s=t.items;for(var r=0;r<s.length;r+=1){const l=tn(t,s,r);a[r]?a[r].p(e,l):(a[r]=sn(l),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}e.y&&O(n,"top",t.y+"px"),e.x&&O(n,"left",t.x+"px"),e.show&&B(n,"show",t.show)},i:e,o:e,d(e){e&&x(n),S(a,e)}}}function rn(e,t,n){let{show:s=!1,items:a=[],x:r=0,y:l=0}=t;return L(()=>document.getElementsByTagName("button")[0].focus()),r<=20&&n("x",r=20),e.$set=(e=>{"show"in e&&n("show",s=e.show),"items"in e&&n("items",a=e.items),"x"in e&&n("x",r=e.x),"y"in e&&n("y",l=e.y)}),{show:s,items:a,x:r,y:l}}class ln extends $e{constructor(e){super(),_e(this,e,rn,an,i,["show","items","x","y"])}}function on(e,t,n){const s=Object.create(e);return s.msg=t[n],s.idx=n,s}function cn(e,t,n){const s=Object.create(e);return s.theJob=t[n],s.i=n,s}function un(e,t,n){const s=Object.create(e);return s.theType=t[n],s}function dn(t){var n,s,a=t.error.message+"";return{c(){n=y("p"),s=w(a),O(n,"color","red")},m(e,t){k(e,n,t),$(n,s)},p(e,t){e.promise&&a!==(a=t.error.message+"")&&C(s,a)},i:e,o:e,d(e){e&&x(n)}}}function hn(e){for(var t,n,s,a,l,i,o,c,u,d,h,p,m,f,g,v,b,_,D,N,O,M,I,J,U,H,P,F,q,G,Y,z,L,K,V,Q,X,Z,W,ee,te,se,ae,re,le,ie,he,pe,me,fe,ge,ve,be,_e,$e,ke,xe,Se,ye,we,Ae,Ee,je=e.$jobs.length+"",De=e.$jobs.filter(e.func).length+"",Ne=e.$jobs.filter(e.func_1).length+"",Te=e.$jobs.filter(e.func_2).length+"",Ce=e.prefs.types,Oe=[],Re=0;Re<Ce.length;Re+=1)Oe[Re]=pn(un(e,Ce,Re));var Me=e.$jobs,Ie=[];for(Re=0;Re<Me.length;Re+=1)Ie[Re]=fn(cn(e,Me,Re));const Je=e=>de(Ie[e],1,1,()=>{Ie[e]=null});var Be=e.smsEditorType&&gn(e),Ue=e.showDriverEditor&&_n(e),He=e.showStateEditor&&xn(e);return{c(){t=y("table"),n=y("tr"),s=y("th"),a=y("input"),l=A(),i=y("th"),o=y("img"),c=A(),u=y("img"),d=A(),h=y("th"),p=y("select"),(m=y("option")).textContent="-";for(var r=0;r<Oe.length;r+=1)Oe[r].c();f=A(),(g=y("th")).innerHTML='<img src="/images/star-full.png" width="16" alt="antatt kvalitet"> <img src="/images/star-full.png" width="16" alt=""> <img src="/images/star-full.png" width="16" alt="">',v=A(),b=y("th"),_=y("ol"),(D=y("li")).textContent="Ti",N=A(),(O=y("li")).textContent="On",M=A(),(I=y("li")).textContent="To",J=A(),U=y("th"),H=y("label"),P=y("input"),F=w("Bare valgte dager"),q=A(),G=y("br"),Y=y("label"),z=y("input"),L=w("Skjul ferdige"),K=A();for(r=0;r<Ie.length;r+=1)Ie[r].c();V=A(),Q=y("col"),X=A(),Z=y("col"),W=A(),ee=y("col"),te=A(),se=y("col"),ae=A(),re=y("col"),le=A(),ie=y("col"),he=A(),pe=y("p"),me=w("Antall jobber totalt: "),fe=w(je),ge=w(". \n\tHentes nå: "),ve=w(De),be=w("\n\tHentet: "),_e=w(Ne),$e=w("\n\tHentes ikke: "),ke=w(Te),xe=A(),Be&&Be.c(),Se=A(),Ue&&Ue.c(),ye=A(),He&&He.c(),we=E(),T(a,"type","search"),T(a,"placeholder","Filtrer"),T(o,"src","/images/bigcar.png"),T(o,"alt","stor bil"),T(o,"height","22"),T(o,"tabindex","0"),B(o,"bigActive",e.bigActive),T(u,"src","/images/smallcar.png"),T(u,"alt","liten bil"),T(u,"height","22"),T(u,"tabindex","0"),B(u,"smallActive",e.smallActive),m.__value="",m.value=m.__value,void 0===e.typeFilter&&ne(()=>e.select_change_handler.call(p)),T(D,"tabindex","0"),B(D,"tueActive",e.tueActive),T(O,"tabindex","0"),B(O,"wedActive",e.wedActive),T(I,"tabindex","0"),B(I,"thuActive",e.thuActive),T(_,"class","days"),T(P,"type","checkbox"),T(z,"type","checkbox"),T(Q,"class","address"),T(Z,"class","cartype"),T(ee,"class","stufftype"),T(se,"class","quality"),T(re,"class","dayscol"),T(ie,"class","status"),T(t,"class","main"),Ee=[j(a,"input",e.input0_input_handler),j(o,"click",e.click_handler_1),j(u,"click",e.click_handler_2),j(p,"change",e.select_change_handler),j(D,"click",e.click_handler_3),j(O,"click",e.click_handler_4),j(I,"click",e.click_handler_5),j(P,"change",e.input1_change_handler),j(z,"change",e.input2_change_handler)]},m(r,x){k(r,t,x),$(t,n),$(n,s),$(s,a),a.value=e.freeTextFilter,$(n,l),$(n,i),$(i,o),$(i,c),$(i,u),$(n,d),$(n,h),$(h,p),$(p,m);for(var S=0;S<Oe.length;S+=1)Oe[S].m(p,null);R(p,e.typeFilter),$(n,f),$(n,g),$(n,v),$(n,b),$(b,_),$(_,D),$(_,N),$(_,O),$(_,M),$(_,I),$(n,J),$(n,U),$(U,H),$(H,P),P.checked=e.dayFilterExclusive,$(H,F),$(U,q),$(U,G),$(U,Y),$(Y,z),z.checked=e.hideDoneJobs,$(Y,L),$(t,K);for(S=0;S<Ie.length;S+=1)Ie[S].m(t,null);$(t,V),$(t,Q),$(t,X),$(t,Z),$(t,W),$(t,ee),$(t,te),$(t,se),$(t,ae),$(t,re),$(t,le),$(t,ie),k(r,he,x),k(r,pe,x),$(pe,me),$(pe,fe),$(pe,ge),$(pe,ve),$(pe,be),$(pe,_e),$(pe,$e),$(pe,ke),k(r,xe,x),Be&&Be.m(r,x),k(r,Se,x),Ue&&Ue.m(r,x),k(r,ye,x),He&&He.m(r,x),k(r,we,x),Ae=!0},p(e,n){if(e.freeTextFilter&&(a.value=n.freeTextFilter),e.bigActive&&B(o,"bigActive",n.bigActive),e.smallActive&&B(u,"smallActive",n.smallActive),e.prefs){Ce=n.prefs.types;for(var s=0;s<Ce.length;s+=1){const t=un(n,Ce,s);Oe[s]?Oe[s].p(e,t):(Oe[s]=pn(t),Oe[s].c(),Oe[s].m(p,null))}for(;s<Oe.length;s+=1)Oe[s].d(1);Oe.length=Ce.length}if(e.typeFilter&&R(p,n.typeFilter),e.tueActive&&B(D,"tueActive",n.tueActive),e.wedActive&&B(O,"wedActive",n.wedActive),e.thuActive&&B(I,"thuActive",n.thuActive),e.dayFilterExclusive&&(P.checked=n.dayFilterExclusive),e.hideDoneJobs&&(z.checked=n.hideDoneJobs),e.filter||e.freeTextFilter||e.smallActive||e.bigActive||e.monActive||e.tueActive||e.wedActive||e.thuActive||e.dayFilterExclusive||e.typeFilter||e.hideDoneJobs||e.drivers||e.$jobs||e.head||e.prefs||e.selectedItems){Me=n.$jobs;for(s=0;s<Me.length;s+=1){const a=cn(n,Me,s);Ie[s]?(Ie[s].p(e,a),ue(Ie[s],1)):(Ie[s]=fn(a),Ie[s].c(),ue(Ie[s],1),Ie[s].m(t,V))}for(oe(),s=Me.length;s<Ie.length;s+=1)Je(s);ce()}Ae&&!e.$jobs||je===(je=n.$jobs.length+"")||C(fe,je),Ae&&!e.$jobs&&!e.head||De===(De=n.$jobs.filter(n.func).length+"")||C(ve,De),Ae&&!e.$jobs&&!e.head||Ne===(Ne=n.$jobs.filter(n.func_1).length+"")||C(_e,Ne),Ae&&!e.$jobs&&!e.head||Te===(Te=n.$jobs.filter(n.func_2).length+"")||C(ke,Te),n.smsEditorType?Be?(Be.p(e,n),ue(Be,1)):((Be=gn(n)).c(),ue(Be,1),Be.m(Se.parentNode,Se)):Be&&(oe(),de(Be,1,1,()=>{Be=null}),ce()),n.showDriverEditor?Ue?ue(Ue,1):((Ue=_n(n)).c(),ue(Ue,1),Ue.m(ye.parentNode,ye)):Ue&&(oe(),de(Ue,1,1,()=>{Ue=null}),ce()),n.showStateEditor?He?ue(He,1):((He=xn(n)).c(),ue(He,1),He.m(we.parentNode,we)):He&&(oe(),de(He,1,1,()=>{He=null}),ce())},i(e){if(!Ae){for(var t=0;t<Me.length;t+=1)ue(Ie[t]);ue(Be),ue(Ue),ue(He),Ae=!0}},o(e){Ie=Ie.filter(Boolean);for(let e=0;e<Ie.length;e+=1)de(Ie[e]);de(Be),de(Ue),de(He),Ae=!1},d(e){e&&x(t),S(Oe,e),S(Ie,e),e&&(x(he),x(pe),x(xe)),Be&&Be.d(e),e&&x(Se),Ue&&Ue.d(e),e&&x(ye),He&&He.d(e),e&&x(we),r(Ee)}}}function pn(e){var t,n,s,a=e.theType+"";return{c(){t=y("option"),n=w(a),t.__value=s=e.theType,t.value=t.__value},m(e,s){k(e,t,s),$(t,n)},p(e,r){e.prefs&&a!==(a=r.theType+"")&&C(n,a),e.prefs&&s!==(s=r.theType)&&(t.__value=s),t.value=t.__value},d(e){e&&x(t)}}}function mn(e){var t,n=new Dt({props:{itemData:e.theJob,prefs:e.prefs,itemSelected:e.selectedItems.indexOf(e.theJob[e.head.JOBNR])>-1}});return n.$on("select",e.select_handler),{c(){n.$$.fragment.c()},m(e,s){ge(n,e,s),t=!0},p(e,t){var s={};e.$jobs&&(s.itemData=t.theJob),e.prefs&&(s.prefs=t.prefs),(e.selectedItems||e.$jobs||e.head)&&(s.itemSelected=t.selectedItems.indexOf(t.theJob[t.head.JOBNR])>-1),n.$set(s)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){de(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function fn(e){var t,n,s=ft(e.freeTextFilter,{smallActive:e.smallActive,bigActive:e.bigActive},{monActive:jn,tueActive:e.tueActive,wedActive:e.wedActive,thuActive:e.thuActive,dayFilterExclusive:e.dayFilterExclusive},e.typeFilter,e.hideDoneJobs,ut,e.theJob,e.head)&&mn(e);return{c(){s&&s.c(),t=E()},m(e,a){s&&s.m(e,a),k(e,t,a),n=!0},p(e,n){ft(n.freeTextFilter,{smallActive:n.smallActive,bigActive:n.bigActive},{monActive:jn,tueActive:n.tueActive,wedActive:n.wedActive,thuActive:n.thuActive,dayFilterExclusive:n.dayFilterExclusive},n.typeFilter,n.hideDoneJobs,ut,n.theJob,n.head)?s?(s.p(e,n),ue(s,1)):((s=mn(n)).c(),ue(s,1),s.m(t.parentNode,t)):s&&(oe(),de(s,1,1,()=>{s=null}),ce())},i(e){n||(ue(s),n=!0)},o(e){de(s),n=!1},d(e){s&&s.d(e),e&&x(t)}}}function gn(e){var t,n=new Ge({props:{$$slots:{default:[bn],header:[vn]},$$scope:{ctx:e}}});return n.$on("close",e.close_handler),{c(){n.$$.fragment.c()},m(e,s){ge(n,e,s),t=!0},p(e,t){var s={};(e.$$scope||e.possibleRecipients||e.recipients||e.message)&&(s.$$scope={changed:e,ctx:t}),n.$set(s)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){de(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function vn(e){var t;return{c(){(t=y("h2")).textContent="Send SMS",T(t,"slot","header")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function bn(e){var t,n,s=new Ht({props:{possibleRecipients:e.possibleRecipients,recipients:e.recipients,message:e.message}});return s.$on("cancel",e.cancel_handler),s.$on("sms",e.sms_handler),{c(){t=A(),s.$$.fragment.c()},m(e,a){k(e,t,a),ge(s,e,a),n=!0},p(e,t){var n={};e.possibleRecipients&&(n.possibleRecipients=t.possibleRecipients),e.recipients&&(n.recipients=t.recipients),e.message&&(n.message=t.message),s.$set(n)},i(e){n||(ue(s.$$.fragment,e),n=!0)},o(e){de(s.$$.fragment,e),n=!1},d(e){e&&x(t),ve(s,e)}}}function _n(e){var t,n=new Ge({props:{$$slots:{default:[kn],header:[$n]},$$scope:{ctx:e}}});return n.$on("close",e.close_handler_1),{c(){n.$$.fragment.c()},m(e,s){ge(n,e,s),t=!0},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){de(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function $n(e){var t;return{c(){(t=y("h2")).textContent="Oppdater hentere",T(t,"slot","header")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function kn(t){var n,s,a=new zt({});return a.$on("cancel",t.cancel_handler_1),{c(){n=A(),a.$$.fragment.c()},m(e,t){k(e,n,t),ge(a,e,t),s=!0},p:e,i(e){s||(ue(a.$$.fragment,e),s=!0)},o(e){de(a.$$.fragment,e),s=!1},d(e){e&&x(n),ve(a,e)}}}function xn(e){var t,n=new Ge({props:{$$slots:{default:[yn],header:[Sn]},$$scope:{ctx:e}}});return n.$on("close",e.close_handler_2),{c(){n.$$.fragment.c()},m(e,s){ge(n,e,s),t=!0},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){de(n.$$.fragment,e),t=!1},d(e){ve(n,e)}}}function Sn(e){var t;return{c(){(t=y("h2")).textContent="Oppdater status",T(t,"slot","header")},m(e,n){k(e,t,n)},d(e){e&&x(t)}}}function yn(t){var n,s,a=new Xt({});return a.$on("cancel",t.cancel_handler_2),a.$on("statusupdate",t.statusupdate_handler),{c(){n=A(),a.$$.fragment.c()},m(e,t){k(e,n,t),ge(a,e,t),s=!0},p:e,i(e){s||(ue(a.$$.fragment,e),s=!0)},o(e){de(a.$$.fragment,e),s=!1},d(e){e&&x(n),ve(a,e)}}}function wn(t){var n,s,a,r,l=new it({});return{c(){n=y("div"),l.$$.fragment.c(),s=A(),(a=y("p")).textContent="...henter data",T(n,"class","dataloading"),O(a,"text-align","center")},m(e,t){k(e,n,t),ge(l,n,null),k(e,s,t),k(e,a,t),r=!0},p:e,i(e){r||(ue(l.$$.fragment,e),r=!0)},o(e){de(l.$$.fragment,e),r=!1},d(e){e&&x(n),ve(l),e&&(x(s),x(a))}}}function An(e){var t,s=[e.msg,{index:e.idx}];let a={};for(var r=0;r<s.length;r+=1)a=n(a,s[r]);var l=new en({props:a});return{c(){l.$$.fragment.c()},m(e,n){ge(l,e,n),t=!0},p(e,t){var n=e.tempMsgQueue?function(e,t){const n={},s={},a={$$scope:1};let r=e.length;for(;r--;){const l=e[r],i=t[r];if(i){for(const e in l)e in i||(s[e]=1);for(const e in i)a[e]||(n[e]=i[e],a[e]=1);e[r]=i}else for(const e in l)a[e]=1}for(const e in s)e in n||(n[e]=void 0);return n}(s,[t.msg,s[1]]):{};l.$set(n)},i(e){t||(ue(l.$$.fragment,e),t=!0)},o(e){de(l.$$.fragment,e),t=!1},d(e){ve(l,e)}}}function En(e){var t,s,a,l,i,o,c,u,d,h,p,m,f;let g={ctx:e,current:null,token:null,pending:wn,then:hn,catch:dn,value:"data",error:"error",blocks:[,,,]};me(u=e.promise,g);for(var v=new ln({props:{show:e.showMenu,x:e.menuX,y:e.menuY,items:[{label:"SMS til giver",icon:"/images/sms.png",action:e.func_3},{label:"SMS til henter",icon:"/images/sms.png",action:e.func_4},{label:"Sett status",icon:"/images/wrench.png",action:e.func_5},{label:"Vis på kart",icon:"/images/map.png",action:e.func_6}]}}),b=new ln({props:{show:e.showConfigMenu,x:e.menuX,y:e.menuY,items:[{label:"Hentere",icon:"/images/smallcar.png",action:e.func_7},{label:"Oppdater data",icon:"/images/wrench.png",action:e.func_8},{label:"Merk alle",icon:"/images/check.png",action:e.func_9},{label:"Fjern merking",icon:"/images/nocheck.png",action:e.func_10},{label:"Tom SMS",icon:"/images/sms.png",action:e.func_11}]}}),_=e.tempMsgQueue,w=[],E=0;E<_.length;E+=1)w[E]=An(on(e,_,E));const C=e=>de(w[e],1,1,()=>{w[e]=null});return{c(){t=y("div"),(s=y("button")).innerHTML='<img src="/images/wrench.png" width="24" alt="Innstillinger">',a=A(),(l=y("h1")).textContent="Loppisadmin",i=A(),(o=y("style")).textContent="h1 {text-align: center;}\n\t.conf {position: absolute; padding: 4px; right: 8em}\n\t.conf img {vertical-align: middle;}\n\ttable.main {\n\t\twidth: 80%;\n\t\tmargin-left: 10%;\n\t\tmargin-right: 10%;\n\t\tborder-collapse: collapse;\n\t\tborder: 1px solid grey;\n\t}\n\ttable.main tr:first-child {\n\t\tbackground: #eee;\n\t\tborder-bottom: 1px solid black;\n\t}\n\tth {text-align: left; padding-left: 16px; }\n\tth li {\n\t\tdisplay: inline-block;\n\t\theight: 20px;\n\t\twidth: 20px;\n\t\tborder-bottom: 1px solid grey;\n\t\tcolor: grey;\n\t\tfont-weight: lighter;\n\t\tmargin-left: 8px;\n\t\tcursor: pointer;\n\t}\n\t.smallActive, .bigActive {\n\t\tborder: 1px solid black;\n\t}\n\t.smallActive, .bigActive, li.monActive, li.tueActive, li.wedActive, li.thuActive {\n\t\tborder-color: black;\n\t\tcolor: black;\n\t}\n\tlabel {font-weight: lighter; font-style: italic;}\n\n\n/* Extra small devices (phones, 600px and down) */\n@media only screen and (max-width: 600px) {\n\tth:nth-child(3) {display: none;}\n\tth:nth-child(4) {display: none;}\n\tth:nth-child(5) {display: none;}\n\ttable {width: 99%; margin: 0;}\n} \n\n@media only screen and (max-width: 700px) {\n\tth:nth-child(3) {display: none;}\n\t.stufftype {width: 25%}\n\t.dayscol {width: 25%}\n\ttable {width: 95%; margin: 2.5%;}\n}\n/* column styles */\n.address {\n\tbackground: #eee;\n\twidth: 25%;\n}\n.cartype {\n\twidth: 5%;\n}\n.quality {\n\twidth: 10%;\n}\n.stufftype {\n\twidth: 10%;\n}\n.dayscol {\n\twidth: 20%;\n}\n.status {\n\twidth: 15%;\n}\n.dataloading {\n\tposition: fixed;\n\tleft: 45%;\n\tright: 50%;\n\ttop: 45%;\n\tbottom: 50%;\n}",c=A(),g.block.c(),d=A(),v.$$.fragment.c(),h=A(),b.$$.fragment.c(),p=A();for(var n=0;n<w.length;n+=1)w[n].c();T(s,"class","conf"),T(o,"type","text/css"),f=[j(s,"click",N(e.click_handler)),j(t,"contextmenu",D(e.contextmenu_handler)),j(t,"click",e.click_handler_6),j(t,"mousedown",e.mousedown_handler),j(t,"mousemove",e.mousemove_handler)]},m(e,n){k(e,t,n),$(t,s),$(t,a),$(t,l),$(t,i),$(t,o),$(t,c),g.block.m(t,g.anchor=null),g.mount=(()=>t),g.anchor=d,$(t,d),ge(v,t,null),$(t,h),ge(b,t,null),$(t,p);for(var r=0;r<w.length;r+=1)w[r].m(t,null);m=!0},p(s,a){e=a,g.ctx=e,"promise"in s&&u!==(u=e.promise)&&me(u,g)||g.block.p(s,n(n({},e),g.resolved));var r={};s.showMenu&&(r.show=e.showMenu),s.menuX&&(r.x=e.menuX),s.menuY&&(r.y=e.menuY),(s.initSms||s.showStateEditor||s.showMenu||s.openMap)&&(r.items=[{label:"SMS til giver",icon:"/images/sms.png",action:e.func_3},{label:"SMS til henter",icon:"/images/sms.png",action:e.func_4},{label:"Sett status",icon:"/images/wrench.png",action:e.func_5},{label:"Vis på kart",icon:"/images/map.png",action:e.func_6}]),v.$set(r);var l={};if(s.showConfigMenu&&(l.show=e.showConfigMenu),s.menuX&&(l.x=e.menuX),s.menuY&&(l.y=e.menuY),(s.showDriverEditor||s.showConfigMenu||s.reload||s.selectAllShown||s.selectedItems||s.smsEditorType)&&(l.items=[{label:"Hentere",icon:"/images/smallcar.png",action:e.func_7},{label:"Oppdater data",icon:"/images/wrench.png",action:e.func_8},{label:"Merk alle",icon:"/images/check.png",action:e.func_9},{label:"Fjern merking",icon:"/images/nocheck.png",action:e.func_10},{label:"Tom SMS",icon:"/images/sms.png",action:e.func_11}]),b.$set(l),s.tempMsgQueue){_=e.tempMsgQueue;for(var i=0;i<_.length;i+=1){const n=on(e,_,i);w[i]?(w[i].p(s,n),ue(w[i],1)):(w[i]=An(n),w[i].c(),ue(w[i],1),w[i].m(t,null))}for(oe(),i=_.length;i<w.length;i+=1)C(i);ce()}},i(e){if(!m){ue(g.block),ue(v.$$.fragment,e),ue(b.$$.fragment,e);for(var t=0;t<_.length;t+=1)ue(w[t]);m=!0}},o(e){for(let e=0;e<3;e+=1){de(g.blocks[e])}de(v.$$.fragment,e),de(b.$$.fragment,e),w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)de(w[e]);m=!1},d(e){e&&x(t),g.block.d(),g.token=null,g=null,ve(v),ve(b),S(w,e),r(f)}}}let jn=!0;function Dn(e,t,n){let s,a;o(e,dt,e=>{n("$jobs",s=e)}),o(e,ut,e=>{n("$drivers",a=e)});let r,l,i,c,u="",d=!1,h=!1,p=!1,m=!1,f=T(),g="",v=!0,b=!0,_=!0,$=!0,k=!0,x=!1,S="",y=[],w=[],A="",E=!0,j=0,D=0,N=[];async function T(e){let t=await fetch(`${we}/prefs`);if(n("prefs",r=await t.json()),n("head",l=r.head),(t=await fetch(`${we}/jobs`+(e?"?refresh=1":""))).ok){let e=await t.json();return e.sort((e,t)=>e[l.ADDRESS]<t[l.ADDRESS]?-1:1),dt.set(e),!0}{let e=await t.text();throw console.log(e),new Error("Ingen tilgang")}}function C(){n("promise",f=T(!0))}function O(e){let t=e.detail;t.selected&&-1===y.indexOf(t.jobnr)?n("selectedItems",y=[...y,t.jobnr]):!t.selected&&y.indexOf(t.jobnr)>-1&&(y.splice(y.indexOf(t.jobnr),1),n("selectedItems",y))}function R(e){if(p)n("showMenu",p=!1);else{let t,s=e;for(;s&&!t&&s.getAttribute;)t=s.getAttribute("data-id"),s=s.parentNode;t&&-1===y.indexOf(t)&&O({detail:{selected:!0,jobnr:t}}),(t||y.length)&&n("showMenu",p=!0)}}function M(e){let t=!1;if(!p&&!m)return;let s=e.target;for(console.log(s,s.className);s;)s.className&&s.className.indexOf("menu")>-1&&(t=!0),s=s.parentNode;t||(n("showMenu",p=!1),n("showConfigMenu",m=!1))}function J(e){p||m||(n("menuX",j=event.clientX),j<.2*window.innerWidth&&n("menuX",j+=.1*window.innerWidth),j>=window.innerWidth-200&&n("menuX",j-=200),n("menuY",D=event.clientY))}function B(e,t){n("tempMsgQueue",N=[...N,{message:e,isError:t}]),setTimeout(()=>{const e=N=N.slice(0,N.length-1);return n("tempMsgQueue",N),e},5e3)}function U(e){n("showMenu",p=!1);let t=y.map(e=>s.find(t=>t[l.JOBNR]===e));"donor"===e?(n("possibleRecipients",i=t.map(e=>({name:e[l.CONTACT_PERSON],number:e[l.PHONE],address:e[l.ADDRESS]}))),n("recipients",w=t.map(e=>e[l.PHONE])),n("smsEditorType",u=e)):(n("possibleRecipients",i=a),n("message",A="Hei, foreslår at du henter følgende jobb(er): \n\n"+t.map(e=>`${e[l.ADDRESS]}\n${e[l.CONTACT_PERSON]}, ${e[l.PHONE]}`).join("\n\n")),n("message",A+=`\n\nMerk jobber som hentet her etterpå:\n${ye}/henting/?jobb=${encodeURIComponent(t.map(e=>(function(e){return e.split(/\//g).splice(-2).join("/")})(e[l.JOBNR])).join(","))}&token=${encodeURIComponent(c)}&henter={number}`),n("smsEditorType",u=e))}function H(){y.length=0,n("selectedItems",y),s.forEach(e=>{ft(g,{smallActive:b,bigActive:v},{monActive:jn,tueActive:_,wedActive:$,thuActive:k,dayFilterExclusive:x},S,E,ut,e,l)&&y.push(e[l.JOBNR])})}function P(){let e=Ae+y.map(e=>{return s.find(t=>t[l.JOBNR]===e)[l.ADDRESS]}).join("/");window.open(e)}return async function(){const e=await fetch(`${we}/helpertoken`);return(await e.json()).token}().then(e=>{return c=e}),dt.subscribe(e=>{console.log("updated data! ",e)}),{smsEditorType:u,showDriverEditor:d,showStateEditor:h,showMenu:p,showConfigMenu:m,promise:f,freeTextFilter:g,bigActive:v,smallActive:b,tueActive:_,wedActive:$,thuActive:k,dayFilterExclusive:x,typeFilter:S,prefs:r,head:l,selectedItems:y,possibleRecipients:i,recipients:w,message:A,hideDoneJobs:E,menuX:j,menuY:D,tempMsgQueue:N,reload:C,updatedSelectedList:O,toggleMenu:R,considerClosingMenu:M,onMouseDown:J,flashMessage:B,initSms:U,selectAllShown:H,openMap:P,$jobs:s,click_handler:function(e){n("showConfigMenu",m=!0)},input0_input_handler:function(){g=this.value,n("freeTextFilter",g)},click_handler_1:function(e){const t=v=!v;return n("bigActive",v),t},click_handler_2:function(e){const t=b=!b;return n("smallActive",b),t},select_change_handler:function(){S=I(this),n("typeFilter",S),n("prefs",r)},click_handler_3:function(e){const t=_=!_;return n("tueActive",_),t},click_handler_4:function(e){const t=$=!$;return n("wedActive",$),t},click_handler_5:function(e){const t=k=!k;return n("thuActive",k),t},input1_change_handler:function(){x=this.checked,n("dayFilterExclusive",x)},input2_change_handler:function(){E=this.checked,n("hideDoneJobs",E)},select_handler:function(e){return O(e)},func:function(e){return"Hentes"===e[l.STATUS]},func_1:function(e){return"Hentet"===e[l.STATUS]},func_2:function(e){return"Hentes ikke"===e[l.STATUS]},cancel_handler:function(e){n("smsEditorType",u=""),n("message",A=""),n("possibleRecipients",i=null)},sms_handler:function(e){(function(e,t){let n;return e=e.map(e=>"47"+(e=e.replace(/\s/g,""))).join(","),t.indexOf("{number}")&&(t=t.replace(/\{number\}/g,"[%1%]"),n=e.split(/,/g).join("|")),fetch(we+"/sendsms",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({to:e,from:ht,message:t,param1:n})}).then(e=>e.json()).then(e=>{if(console.log(e),e.error)throw new Error(e.message);return e})})(e.detail.recipients,e.detail.message).then(()=>B("SMS sendt til "+e.detail.recipients)).catch(e=>B(e,!0)),n("message",A=""),n("possibleRecipients",i=null),n("smsEditorType",u="")},close_handler:function(){const e=u="";return n("smsEditorType",u),e},cancel_handler_1:function(e){n("showDriverEditor",d=!1)},close_handler_1:function(){const e=d=!1;return n("showDriverEditor",d),e},cancel_handler_2:function(e){n("showStateEditor",h=!1)},statusupdate_handler:function(e){e.detail.newState&&y.forEach(t=>{s.find(e=>e[l.JOBNR]===t)[l.ASSIGNEE]||pt(t,{status:e.detail.newState})}),n("showStateEditor",h=!1)},close_handler_2:function(){const e=h=!1;return n("showStateEditor",h),e},func_3:function(e){return U("donor")},func_4:function(e){return U("worker")},func_5:function(e){const t=(h=!0,p=!1);return n("showStateEditor",h),n("showMenu",p),t},func_6:function(e){const t=(P(),p=!1);return n("showMenu",p),t},func_7:function(e){const t=(d=!0,m=!1);return n("showDriverEditor",d),n("showConfigMenu",m),t},func_8:function(e){const t=(m=!1,C());return n("showConfigMenu",m),t},func_9:function(e){const t=(m=!1,H());return n("showConfigMenu",m),t},func_10:function(e){const t=(m=!1,y.length=0);return n("showConfigMenu",m),n("selectedItems",y),t},func_11:function(e){const t=(m=!1,u="new");return n("showConfigMenu",m),n("smsEditorType",u),t},contextmenu_handler:function(e){R(e.target)},click_handler_6:function(e){return M(e)},mousedown_handler:function(e){return J()},mousemove_handler:function(e){return J()}}}class Nn extends $e{constructor(e){super(),_e(this,e,Dn,En,i,[])}}const{Object:Tn}=fe;function Cn(e,t,n){const s=Tn.create(e);return s.job=t[n],s.each_value=t,s.i=n,s}function On(t){var n,s,a=t.error.message+"";return{c(){n=y("p"),s=w(a),O(n,"color","red")},m(e,t){k(e,n,t),$(n,s)},p(e,t){e.promise&&a!==(a=t.error.message+"")&&C(s,a)},i:e,o:e,d(e){e&&x(n)}}}function Rn(e){for(var t,n,s,a,r,l,i,o,c,u=e.$jobs.length>1&&Mn(e),d=e.$jobs,h=[],p=0;p<d.length;p+=1)h[p]=Gn(Cn(e,d,p));const m=e=>de(h[e],1,1,()=>{h[e]=null});return{c(){(t=y("h1")).textContent="Hentinger",n=A(),u&&u.c(),s=A();for(var o=0;o<h.length;o+=1)h[o].c();a=A(),r=y("hr"),l=A(),(i=y("button")).textContent="Alle mine jobber",T(t,"class","svelte-1l2x28v"),T(i,"class","p8 br2 svelte-1l2x28v"),c=j(i,"click",e.click_handler_4)},m(e,c){k(e,t,c),k(e,n,c),u&&u.m(e,c),k(e,s,c);for(var d=0;d<h.length;d+=1)h[d].m(e,c);k(e,a,c),k(e,r,c),k(e,l,c),k(e,i,c),o=!0},p(e,t){if(t.$jobs.length>1?u?u.p(e,t):((u=Mn(t)).c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null),e.$jobs||e.prefs||e.params||e.normalizeNumber||e.gMapsDirection){d=t.$jobs;for(var n=0;n<d.length;n+=1){const s=Cn(t,d,n);h[n]?(h[n].p(e,s),ue(h[n],1)):(h[n]=Gn(s),h[n].c(),ue(h[n],1),h[n].m(a.parentNode,a))}for(oe(),n=d.length;n<h.length;n+=1)m(n);ce()}},i(e){if(!o){for(var t=0;t<d.length;t+=1)ue(h[t]);o=!0}},o(e){h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)de(h[e]);o=!1},d(e){e&&(x(t),x(n)),u&&u.d(e),e&&x(s),S(h,e),e&&(x(a),x(r),x(l),x(i)),c()}}}function Mn(e){var t,n,s,a,r,l;return{c(){t=y("p"),n=y("a"),s=w("Kart med alle adresser: "),a=y("br"),T(r=y("img"),"src","/images/map.png"),T(r,"alt","alle adresser i kart"),T(r,"width","36"),T(n,"href",l=Ae+e.$jobs.map(e.func).join("/")),T(n,"target","_blank"),T(t,"class","commonmap svelte-1l2x28v")},m(e,l){k(e,t,l),$(t,n),$(n,s),$(n,a),$(n,r)},p(e,t){(e.$jobs||e.prefs)&&l!==(l=Ae+t.$jobs.map(t.func).join("/"))&&T(n,"href",l)},d(e){e&&x(t)}}}function In(e){var t,n,s=new it({});return{c(){t=y("div"),s.$$.fragment.c(),T(t,"class","loading svelte-1l2x28v")},m(e,a){k(e,t,a),ge(s,t,null),n=!0},i(e){n||(ue(s.$$.fragment,e),n=!0)},o(e){de(s.$$.fragment,e),n=!1},d(e){e&&x(t),ve(s)}}}function Jn(e){var t,n,s,a,r=e.job[e.prefs.head.DESC]+"";return{c(){t=y("p"),(n=y("b")).textContent="Om loppene: ",s=y("i"),a=w(r),T(n,"class","svelte-1l2x28v"),T(s,"class","svelte-1l2x28v"),T(t,"class","svelte-1l2x28v")},m(e,r){k(e,t,r),$(t,n),$(t,s),$(s,a)},p(e,t){(e.$jobs||e.prefs)&&r!==(r=t.job[t.prefs.head.DESC]+"")&&C(a,r)},d(e){e&&x(t)}}}function Bn(e){var t,n,s,a,r=[Hn,Un],l=[];function i(e){return"Hentes"===e.job[e.prefs.head.STATUS]?0:"Hentet"===e.job[e.prefs.head.STATUS]?1:-1}return~(t=i(e))&&(n=l[t]=r[t](e)),{c(){n&&n.c(),s=E()},m(e,n){~t&&l[t].m(e,n),k(e,s,n),a=!0},p(e,a){var o=t;(t=i(a))!==o&&(n&&(oe(),de(l[o],1,1,()=>{l[o]=null}),ce()),~t?((n=l[t])||(n=l[t]=r[t](a)).c(),ue(n,1),n.m(s.parentNode,s)):n=null)},i(e){a||(ue(n),a=!0)},o(e){de(n),a=!1},d(e){~t&&l[t].d(e),e&&x(s)}}}function Un(e){var t,n,s,a,r;return{c(){t=y("br"),n=A(),(s=y("em")).innerHTML="<br>★ ★ ☺  Takk for at du hentet!  ☺ ★ ★"},m(e,a){k(e,t,a),k(e,n,a),k(e,s,a),r=!0},i(e){r||(ne(()=>{a||(a=pe(s,xe,{},!0)),a.run(1)}),r=!0)},o(e){a||(a=pe(s,xe,{},!1)),a.run(0),r=!1},d(e){e&&(x(t),x(n),x(s),a&&a.end())}}}function Hn(e){var t,n,s,a,r;return{c(){t=y("br"),n=A(),(s=y("em")).innerHTML="<br>★ ★ ☺   Du har tatt på deg jobben - takk!  ☺ ★ ★"},m(e,a){k(e,t,a),k(e,n,a),k(e,s,a),r=!0},i(e){r||(ne(()=>{a||(a=pe(s,xe,{},!0)),a.run(1)}),r=!0)},o(e){a||(a=pe(s,xe,{},!1)),a.run(0),r=!1},d(e){e&&(x(t),x(n),x(s),a&&a.end())}}}function Pn(e){var t,n,s,a,r,l,i,o,c,u=mt(e.job[e.prefs.head.ASSIGNEE])+"";return{c(){t=y("br"),n=A(),s=y("em"),a=y("b"),r=w("Merk: jobben er akseptert av en annen. Sjekk med "),l=y("a"),i=w(u),c=w(" om du vurderer å hente."),T(l,"href",o="tel:"+mt(e.job[e.prefs.head.ASSIGNEE])),T(a,"class","svelte-1l2x28v")},m(e,o){k(e,t,o),k(e,n,o),k(e,s,o),$(s,a),$(a,r),$(a,l),$(l,i),$(a,c)},p(e,t){(e.$jobs||e.prefs)&&u!==(u=mt(t.job[t.prefs.head.ASSIGNEE])+"")&&C(i,u),(e.$jobs||e.prefs)&&o!==(o="tel:"+mt(t.job[t.prefs.head.ASSIGNEE]))&&T(l,"href",o)},d(e){e&&(x(t),x(n),x(s))}}}function Fn(e){var t,n;function s(...t){return e.click_handler_3(e,...t)}return{c(){(t=y("button")).textContent="Vi tar jobben!",T(t,"class","p8 br2 svelte-1l2x28v"),n=j(t,"click",s)},m(e,n){k(e,t,n)},p(t,n){e=n},d(e){e&&x(t),n()}}}function qn(e){var t,n,s,a,l,i;function o(...t){return e.click_handler(e,...t)}function c(...t){return e.click_handler_1(e,...t)}function u(...t){return e.click_handler_2(e,...t)}return{c(){(t=y("button")).textContent="Ferdig hentet!",n=A(),(s=y("button")).textContent="Vi rekker ikke å hente likevel",a=A(),(l=y("button")).textContent="Jobben skal ikke hentes",T(t,"class","p8 br2 svelte-1l2x28v"),T(s,"class","p8 br2 svelte-1l2x28v"),T(l,"class","p8 br2 svelte-1l2x28v"),i=[j(t,"click",o),j(s,"click",c),j(l,"click",u)]},m(e,r){k(e,t,r),k(e,n,r),k(e,s,r),k(e,a,r),k(e,l,r)},p(t,n){e=n},d(e){e&&(x(t),x(n),x(s),x(a),x(l)),r(i)}}}function Gn(e){var t,n,s,a,l,i,o,c,u,d,p,m,f,g,v,b,_,S,E,D,N,O,R,M,I,J,B,U,H,P,F,q,G,Y,z,L,K,V,Q,X,Z,W,ee,te,ne,se,ae,re,le,ie,he,pe,me=e.job[e.prefs.head.ADDRESS]+"",fe=e.job[e.prefs.head.JOBNR]+"",be=e.job[e.prefs.head.STATUS]+"",_e=e.job.loading&&In(),$e=new Xe({props:{name:e.job[e.prefs.head.CONTACT_PERSON],number:e.job[e.prefs.head.PHONE]}}),ke=new Ue({props:{types:e.job[e.prefs.head.TYPES],showAll:!0}}),xe=e.job[e.prefs.head.DESC]&&Jn(e);var Se=new at({props:{qualityRanking:e.job[e.prefs.head.QUALITY]}});function ye(){e.textarea_input_handler.call(z,e)}function we(...t){return e.change_handler(e,...t)}Se.$on("qualityupdate",function(...t){return e.qualityupdate_handler(e,...t)});var Ee=e.job[e.prefs.head.ASSIGNEE]&&e.job[e.prefs.head.ASSIGNEE]===e.params.henter&&Bn(e),je=e.job[e.prefs.head.ASSIGNEE]&&e.job[e.prefs.head.ASSIGNEE]!==e.params.henter&&Pn(e);function De(e){return e.job[e.prefs.head.ASSIGNEE]===e.params.henter&&"Hentes"===e.job[e.prefs.head.STATUS]?qn:Fn}var Ne=De(e),Te=Ne(e);return{c(){_e&&_e.c(),t=A(),n=y("section"),s=y("p"),(a=y("b")).textContent="Adresse:",l=A(),i=y("span"),o=w(me),c=A(),u=y("a"),d=y("img"),m=A(),f=y("span"),g=w(fe),v=A(),b=y("p"),(_=y("b")).textContent="Kontaktperson:",S=A(),E=y("span"),$e.$$.fragment.c(),D=A(),N=y("p"),(O=y("b")).textContent="Typer:",R=A(),M=y("span"),ke.$$.fragment.c(),I=A(),xe&&xe.c(),J=A(),B=y("p"),(U=y("b")).textContent="Estimert kvalitet: ",H=y("span"),Se.$$.fragment.c(),P=A(),F=y("p"),(q=y("b")).textContent="Administrators/henteres kommentarer:",G=A(),Y=y("span"),z=y("textarea"),L=A(),K=y("p"),(V=y("b")).textContent="Status: ",Q=y("span"),X=y("em"),Z=w(be),W=A(),ee=y("br"),te=A(),Ee&&Ee.c(),ne=A(),je&&je.c(),se=A(),ae=y("p"),(re=y("b")).textContent="Oppdater status:",le=y("span"),Te.c(),T(a,"class","svelte-1l2x28v"),T(d,"src","/images/map.png"),T(d,"alt","adresse i kart"),T(d,"width","24"),T(u,"href",p=Ae+e.job[e.prefs.head.ADDRESS]),T(u,"target","_blank"),T(i,"class","svelte-1l2x28v"),T(f,"class","jobnr svelte-1l2x28v"),T(s,"class","svelte-1l2x28v"),T(_,"class","svelte-1l2x28v"),T(E,"class","svelte-1l2x28v"),T(b,"class","svelte-1l2x28v"),T(O,"class","svelte-1l2x28v"),T(M,"class","svelte-1l2x28v"),T(N,"class","hideondone svelte-1l2x28v"),T(U,"class","svelte-1l2x28v"),T(H,"class","svelte-1l2x28v"),T(B,"class","hideondone svelte-1l2x28v"),T(q,"class","svelte-1l2x28v"),T(z,"class","svelte-1l2x28v"),T(Y,"class","svelte-1l2x28v"),T(F,"class","hideondone svelte-1l2x28v"),T(V,"class","svelte-1l2x28v"),T(Q,"class","svelte-1l2x28v"),T(K,"class","svelte-1l2x28v"),T(re,"class","svelte-1l2x28v"),T(le,"class","svelte-1l2x28v"),T(ae,"class","hideondone svelte-1l2x28v"),T(n,"class",ie=h(e.job[e.prefs.head.STATUS])+" svelte-1l2x28v"),pe=[j(z,"input",ye),j(z,"change",we)]},m(r,h){_e&&_e.m(r,h),k(r,t,h),k(r,n,h),$(n,s),$(s,a),$(s,l),$(s,i),$(i,o),$(i,c),$(i,u),$(u,d),$(s,m),$(s,f),$(f,g),$(n,v),$(n,b),$(b,_),$(b,S),$(b,E),ge($e,E,null),$(n,D),$(n,N),$(N,O),$(N,R),$(N,M),ge(ke,M,null),$(n,I),xe&&xe.m(n,null),$(n,J),$(n,B),$(B,U),$(B,H),ge(Se,H,null),$(n,P),$(n,F),$(F,q),$(F,G),$(F,Y),$(Y,z),z.value=e.job[e.prefs.head.ADMCOMMENT],$(n,L),$(n,K),$(K,V),$(K,Q),$(Q,X),$(X,Z),$(Q,W),$(Q,ee),$(Q,te),Ee&&Ee.m(Q,null),$(Q,ne),je&&je.m(Q,null),$(n,se),$(n,ae),$(ae,re),$(ae,le),Te.m(le,null),he=!0},p(s,a){(e=a).job.loading?_e?ue(_e,1):((_e=In()).c(),ue(_e,1),_e.m(t.parentNode,t)):_e&&(oe(),de(_e,1,1,()=>{_e=null}),ce()),he&&!s.$jobs&&!s.prefs||me===(me=e.job[e.prefs.head.ADDRESS]+"")||C(o,me),he&&!s.$jobs&&!s.prefs||p===(p=Ae+e.job[e.prefs.head.ADDRESS])||T(u,"href",p),he&&!s.$jobs&&!s.prefs||fe===(fe=e.job[e.prefs.head.JOBNR]+"")||C(g,fe);var r={};(s.$jobs||s.prefs)&&(r.name=e.job[e.prefs.head.CONTACT_PERSON]),(s.$jobs||s.prefs)&&(r.number=e.job[e.prefs.head.PHONE]),$e.$set(r);var l={};(s.$jobs||s.prefs)&&(l.types=e.job[e.prefs.head.TYPES]),ke.$set(l),e.job[e.prefs.head.DESC]?xe?xe.p(s,e):((xe=Jn(e)).c(),xe.m(n,J)):xe&&(xe.d(1),xe=null);var i={};(s.$jobs||s.prefs)&&(i.qualityRanking=e.job[e.prefs.head.QUALITY]),Se.$set(i),(s.$jobs||s.prefs)&&(z.value=e.job[e.prefs.head.ADMCOMMENT]),he&&!s.$jobs&&!s.prefs||be===(be=e.job[e.prefs.head.STATUS]+"")||C(Z,be),e.job[e.prefs.head.ASSIGNEE]&&e.job[e.prefs.head.ASSIGNEE]===e.params.henter?Ee?(Ee.p(s,e),ue(Ee,1)):((Ee=Bn(e)).c(),ue(Ee,1),Ee.m(Q,ne)):Ee&&(oe(),de(Ee,1,1,()=>{Ee=null}),ce()),e.job[e.prefs.head.ASSIGNEE]&&e.job[e.prefs.head.ASSIGNEE]!==e.params.henter?je?je.p(s,e):((je=Pn(e)).c(),je.m(Q,null)):je&&(je.d(1),je=null),Ne!==(Ne=De(e))&&(Te.d(1),(Te=Ne(e))&&(Te.c(),Te.m(le,null))),he&&!s.$jobs&&!s.prefs||ie===(ie=h(e.job[e.prefs.head.STATUS])+" svelte-1l2x28v")||T(n,"class",ie)},i(e){he||(ue(_e),ue($e.$$.fragment,e),ue(ke.$$.fragment,e),ue(Se.$$.fragment,e),ue(Ee),he=!0)},o(e){de(_e),de($e.$$.fragment,e),de(ke.$$.fragment,e),de(Se.$$.fragment,e),de(Ee),he=!1},d(e){_e&&_e.d(e),e&&(x(t),x(n)),ve($e),ve(ke),xe&&xe.d(),ve(Se),Ee&&Ee.d(),je&&je.d(),Te.d(),r(pe)}}}function Yn(t){var n,s,a=new it({});return{c(){n=y("div"),a.$$.fragment.c(),T(n,"class","loading svelte-1l2x28v")},m(e,t){k(e,n,t),ge(a,n,null),s=!0},p:e,i(e){s||(ue(a.$$.fragment,e),s=!0)},o(e){de(a.$$.fragment,e),s=!1},d(e){e&&x(n),ve(a)}}}function zn(e){var t,s,a;let r={ctx:e,current:null,token:null,pending:Yn,then:Rn,catch:On,value:"data",error:"error",blocks:[,,,]};return me(s=e.promise,r),{c(){t=E(),r.block.c()},m(e,n){k(e,t,n),r.block.m(e,r.anchor=n),r.mount=(()=>t.parentNode),r.anchor=t,a=!0},p(t,a){e=a,r.ctx=e,"promise"in t&&s!==(s=e.promise)&&me(s,r)||r.block.p(t,n(n({},e),r.resolved))},i(e){a||(ue(r.block),a=!0)},o(e){for(let e=0;e<3;e+=1){de(r.blocks[e])}a=!1},d(e){e&&x(t),r.block.d(e),r.token=null,r=null}}}function Ln(e,t,n){let s,a,r,l;function i(e){return(e=e.sort((e,t)=>e[l.head.ADDRESS]<t[l.head.ADDRESS]?-1:1)).forEach(e=>{e.oldStatus="Hentes"===e[l.head.STATUS]?null:e[l.head.STATUS]}),e}async function c(e,t){const n=await fetch(`${we}/byperson/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`);let s=await n.json();if(!n.ok){let e=await n.text();throw console.log(e),new Error("Ingen tilgang")}s=i(s),dt.set(s)}function u(e,t){return pt(e,l.head,t,a.token).catch(e=>alert(e))}return o(e,dt,e=>{n("$jobs",s=e)}),"undefined"!=typeof location&&n("params",a=location.search.substr(1).split(/&/g).map(e=>{let t=e.split(/=/);return{[t[0]]:decodeURIComponent(t[1])}}).reduce((e,t)=>Object.assign(e,t),{})),a&&a.token&&a.jobb&&n("promise",r=async function(e,t){let s=await fetch(`${we}/prefs`);n("prefs",l=await s.json()),s=await fetch(`${we}/job/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`);let a=await s.json();if(!s.ok){let e=await s.text();throw console.log(e),new Error("Ingen tilgang")}a=i(a),dt.set(a)}(a.token,a.jobb)),dt.subscribe(e=>{console.log("updated data! ",e)}),{params:a,promise:r,prefs:l,getDataByAssignee:c,update:u,$jobs:s,func:function(e){return e[l.head.ADDRESS]},qualityupdate_handler:function({job:e},t){return u(e[l.head.JOBNR],t.detail)},textarea_input_handler:function({job:e,each_value:t,i:s}){t[s][l.head.ADMCOMMENT]=this.value,n("prefs",l)},change_handler:function({job:e},t){return u(e[l.head.JOBNR],{[l.head.ADMCOMMENT]:t.target.value})},click_handler:function({job:e},t){return u(e[l.head.JOBNR],{[l.head.STATUS]:"Hentet",[l.head.ASSIGNEE]:a.henter})},click_handler_1:function({job:e},t){return u(e[l.head.JOBNR],{[l.head.STATUS]:e.oldStatus||"Ny",[l.head.ASSIGNEE]:""})},click_handler_2:function({job:e},t){return u(e[l.head.JOBNR],{[l.head.STATUS]:"Hentes ikke",[l.head.ASSIGNEE]:""})},click_handler_3:function({job:e},t){return u(e[l.head.JOBNR],{[l.head.STATUS]:"Hentes",[l.head.ASSIGNEE]:a.henter})},click_handler_4:function(e){const t=r=c(a.token,a.henter);return n("promise",r),t}}}class Kn extends $e{constructor(e){super(),_e(this,e,Ln,zn,i,[])}}var Vn;if("undefined"!=typeof location){Vn=new(0,{"/":Nn,"/henting/":Kn}[location.pathname])({target:document.body})}else Vn=new Nn({target:document.body});return Vn}();
//# sourceMappingURL=bundle.js.map
